define("layout/util/dataPreparationsForAnchors",["lodash","utils","experiment"],function(a,b,c){"use strict";function f(){return{flat:{},sortingY:{},minHeight:{},shrinkableContainer:{},ignoreOriginalValue:{},noHeightChange:{},containerHeightMargin:{},currentHeight:{},currentY:{},heightDiff:{},topDiff:{},locked:{},valueForFirstLockedAnchor:{}}}function g(a){return"Document"===a.type||"wysiwyg.viewer.components.PagesContainer"===a.componentType}function h(a,b,c){var d=a.id;a.layout&&a.layout.rotationInDegrees&&(b.noHeightChange[d]=!0),c.shrinkableContainer[d]?b.shrinkableContainer[d]=!0:g(a,c)&&(b.ignoreOriginalValue[d]=!0)}function i(a,c,d){return b.boundingLayout.getBoundingHeight({height:a,width:c,rotationInDegrees:d})}function j(a,c,d,e){return b.boundingLayout.getBoundingY({y:a,height:c,width:d,rotationInDegrees:e})}function k(a,b,d){var h,e=a.id,f=a.layout?a.layout.rotationInDegrees:0,g=d.height[e];h=c.isOpen("sv_partialReLayout")||c.isOpen("layout_verbs_with_anchors")?d.top[e]:d.top&&void 0!==d.top[e]?d.top[e]:a.layout&&a.layout.y||0,b.currentHeight[a.id]=f?i(g,d.width[e],f):g,b.heightDiff[e]=b.currentHeight[a.id]-g,b.currentY[e]=f?j(h,g,d.width[e],f):h,b.topDiff[e]=h-b.currentY[e]}function l(c,d,e,f,g,i){if(a.has(e.height,c.id)){h(c,d,e),k(c,d,e),d.minHeight[c.id]=m(c,d),d.currentHeight[c.id]=Math.max(d.currentHeight[c.id],d.minHeight[c.id]),d.collapsed[c.id]&&(d.currentHeight[c.id]=0),d.flat[c.id]=c;var j=d.currentY[c.id],n=f+j-g,o=d.currentHeight[c.id];if(d.sortingY[c.id]=n,d.valueForFirstLockedAnchor[c.id]={pusherId:null,value:-Number.MAX_VALUE},!d.collapsed[c.id]){var p=b.dataUtils.getChildrenData(c,i);a.forEach(p,function(a){l(a,d,e,n,o||5e3,i)})}}}function m(a,b){var c=a.id;return c&&!n(c)?Math.max(b.minHeight[c]||0,e):b.minHeight[c]||0}function n(b){return b&&a.includes(d,b)}function o(a,b,c,d){l(a,b,c,0,0,d)}function p(a,b,c){return{distance:c,type:a,targetComponent:b,locked:!0,notEnforcingMinValue:!0}}function q(b,c,d,e){var f=b;b.$cloned||(f=a.clone(f),f.layout=a.clone(f.layout),f.layout.anchors=a.clone(f.layout.anchors),f.$cloned=!0);var g=f.layout.anchors;return g.push(p("TOP_TOP",c,d),p("BOTTOM_BOTTOM",c,e)),f}function r(b){a.forEach(b,function(c,d){if(c.layout&&c.layout.anchors){var e=a.filter(c.layout.anchors,{type:"LOCK_BOTTOM"});a.isEmpty(e)||(a.forEach(e,function(a){b[d]=q(b[d],a.targetComponent,a.topToTop,a.distance),b[a.targetComponent]=q(b[a.targetComponent],d,-1*a.topToTop,-1*a.distance)}),a.remove(b[d].layout.anchors,{type:"LOCK_BOTTOM"}))}})}function s(b){var c=a.get(b,"components[0].componentType");return"wysiwyg.viewer.components.PopupContainer"===c}function t(b,c,d){var e=f();e.containerHeightMargin=c.containerHeightMargin||{},e.minHeight=a.clone(c.minHeight||{}),e.collapsed=a.clone(c.collapsed||{}),e.injectedAnchors=c.injectedAnchors||{},e.__isPopup=s(b),o(b,e,c,d),r(e.flat);var g=a.sortBy(a.keys(e.flat),function(a){return e.sortingY[a]});return delete e.sortingY,{structureData:e,sortedIds:g}}function u(b,c){a.forEach(c.flat,function(a,d){b.height[d]=c.currentHeight[d]-c.heightDiff[d],b.top[d]=c.currentY[d]+c.topDiff[d]})}function v(c,d,e,f){if(!a.has(c.height,f.id))return 0;d=d||0,d+=c.top[f.id];var g=b.dataUtils.getChildrenData(f,e);return g=a.reject(g,{layout:{fixedPosition:!0}}),Math.max(d+c.height[f.id],Math.max.apply(null,a.map(g,a.partial(v,c,d,e))))}var d=["WIX_ADS"],e=5;return{getDataForAnchorsAndSort:t,fixMeasureMap:u,maxMeasureMapHeight:v}}),define("layout/util/anchors",["lodash","layout/util/dataPreparationsForAnchors","experiment"],function(a,b,c){"use strict";function l(a,b,c,d){return b!==c&&(d.dirty[a]=!0),d.dirty[a]&&(d.changedCompsMap[a]=d.flat[a]),d.dirty[a]}function m(b,c,d,e){var f=d[e.targetComponent],g=d[c];e.notEnforcingMinValue&&!a.isEmpty(g)&&(e.notEnforcingMinValue=!1),f[c]=b;var h=Math.max.apply(null,a.values(f));return e.notEnforcingMinValue&&delete f[c],h}function n(a,b,d,e,f){var g=a.targetComponent,h=b.valueForFirstLockedAnchor[g];h&&(a.locked||(b.__isPopup||c.isOpen("removeJsonAnchors"))&&null===f?(h.pusherId&&(d[g]={},d[g][h.pusherId]=h.value),delete b.valueForFirstLockedAnchor[g]):(h.pusherId=e,h.value=Math.max(f,h.value)))}function o(a){return a%1}function p(a,b){var c=b-a;return b-=o(c)}function q(b,c){return a.has(b.currentHeight,c)}function r(a,b,c,d){var e;return d.shrinkableContainer[c]?e=b:a.locked?e=b+a.distance:(e=b+h,d.ignoreOriginalValue[c]||(e=Math.max(e,a.originalValue))),e}function s(b,c,d,e){var f=b;return a.isNumber(e.minHeight[c])&&b<e.minHeight[c]&&(f=e.minHeight[c],d.notEnforcingMinValue&&(d.notEnforcingMinValue=!1,e.dirty[c]=!0,e.changedCompsMap[c]=e.flat[c])),f}function t(b,d,e){if("masterPage"===b)return[];if(a.has(e.injectedAnchors,b))return e.injectedAnchors[b];var f=e.flat[b],g=f.layout?f.layout.anchors:[];if(window.publicModel&&d&&c.isOpen("viewerGeneratedAnchors"))return d[b]||[];var h=d&&d[b];return g||h||[]}function u(b,c,d,e,f,g){function i(b){var i=t(b,e,d),l=Number.MAX_VALUE;return!d.dirty[b]||f&&!j[b]||a.forEach(i,function(a){if(k[a.type]&&d.flat[a.targetComponent]&&(!f||j[a.targetComponent])){a.targetComponent===g&&(h=!0);var e=k[a.type](b,a,d)?c[a.targetComponent]:Number.MAX_VALUE;l=Math.min(e,l)}}),d.dirty[b]=!1,l}for(var h=!1,l=b.length,m=0;l>m;){var n=i(b[m]);m=Math.min(m+1,n)}return h}function v(d,e,f,g,h,j,k,l){var m=b.getDataForAnchorsAndSort(d,e,g),n=m.structureData,o=m.sortedIds,p=a.invert(o);n.dirty={},n.toTopAnchorsY={},n.toBottomAnchorsHeight={},n.locked=j,n.changedCompsMap=n.flat,n.ignoreBottomBottom=!!l,a.forEach(n.flat,function(a,b){n.dirty[b]=!0,n.toTopAnchorsY[b]={},n.toBottomAnchorsHeight[b]={}}),k&&(n.dirty=a.clone(k),n.changedCompsMap=a.pick(n.flat,a.keys(k)));var q=u(o,p,n,f,h,d.id);return b.fixMeasureMap(e,n),!c.isOpen("sv_partialReLayout")&&q||!a.includes(i,d.type)||(e.height[d.id]=b.maxMeasureMapHeight(e,0,g,d),n.changedCompsMap[d.id]=n.flat[d.id]),n.changedCompsMap}var d="TOP_TOP",e="BOTTOM_TOP",f="BOTTOM_BOTTOM",g="BOTTOM_PARENT",h=10,i=["Page","Document"],j={SITE_FOOTER:!0,SITE_HEADER:!0,SITE_PAGES:!0,PAGES_CONTAINER:!0,masterPage:!0,SITE_BACKGROUND:!0},k={};return k[d]=function(b,c,d){var e=c.targetComponent;if(!q(d,e)||!q(d,b))return!1;if(a.has(d.locked,e))return!1;var f=d.currentY[e],g=d.currentY[b]+c.distance;return n(c,d,d.toTopAnchorsY,b,null),g=m(g,b,d.toTopAnchorsY,c),g=p(f,g),d.currentY[e]=g,l(e,f,g,d)},k[e]=function(b,c,d){var e=c.targetComponent;if(!q(d,e)||!q(d,b))return!1;if(a.has(d.locked,e))return!1;var f=d.currentY[e],g=d.currentHeight[b]+d.currentY[b],i=null;return c.locked?g+=c.distance:(i=g+h,g=d.valueForFirstLockedAnchor[e]?Math.max(g+h,c.originalValue):i),g=Math.max(g,d.currentY[b]+d.currentHeight[b]/2),n(c,d,d.toTopAnchorsY,b,i),g=m(g,b,d.toTopAnchorsY,c),g=p(f,g),d.currentY[e]=g,l(e,f,g,d)},k[g]=function(b,c,d){var e=c.targetComponent;if(!q(d,e)||!q(d,b))return!1;if(a.has(d.locked,e))return!1;if(d.flat[e].layout&&d.flat[e].layout.rotationInDegrees)return!1;var f=d.currentHeight[e],g=d.currentHeight[b]+d.currentY[b],h=d.containerHeightMargin[e]||0,i=r(c,g+h,e,d);return i=s(i,e,c,d),i=m(i,b,d.toBottomAnchorsHeight,c),d.currentHeight[e]=i,l(e,f,i,d)},k[f]=function(b,c,d){if(d.ignoreBottomBottom)return!1;var e=c.targetComponent;if(!q(d,e)||!q(d,b))return!1;if(a.has(d.locked,e))return!1;if(d.flat[e].layout&&d.flat[e].layout.rotationInDegrees)return!1;var f=d.currentHeight[e],g=d.currentHeight[b]+d.currentY[b],h=d.currentY[e],i=r(c,g-h,e,d);return i=s(i,e,c,d),i=m(i,b,d.toBottomAnchorsHeight,c),d.currentHeight[e]=i,l(e,f,i,d)},{enforceAnchors:v,HARD_WIRED_COMPS:j}}),define("layout/util/reduceDistancesAlgorithm/anchorsTypes",[],function(){"use strict";return{TOP_TOP:"TOP_TOP",BOTTOM_TOP:"BOTTOM_TOP",BOTTOM_PARENT:"BOTTOM_PARENT"}}),define("layout/util/reduceDistancesAlgorithm/createAnchorsDataManager",["lodash","layout/util/reduceDistancesAlgorithm/anchorsTypes"],function(a,b){"use strict";function d(d,e,f){function j(a){h.from[a.fromComp]=h.from[a.fromComp]||[],h.from[a.fromComp].push(a),h.to[a.targetComponent]=h.to[a.targetComponent]||[],h.to[a.targetComponent].push(a)}function k(b){f[b.targetComponent]&&(b=a.assign({},b,{locked:!0,distance:0})),i.from[b.fromComp]=b,i.to[b.targetComponent]=i.to[b.targetComponent]||[],i.to[b.targetComponent].push(b)}function l(a){return!e||c[a.fromComp]&&c[a.targetComponent]}var g=a.flatten(a.values(d)),h={from:{},to:{}},i={from:{},to:{}},m=a.filter(g,l);return a.forEach(m,function(a){a.type===b.BOTTOM_PARENT?k(a):j(a)}),{anchors:m,siblingsAnchors:h,childToParentAnchors:i}}function e(b,c,e){var f=d(b,c,e);a.merge(this,{getComponentPushers:function(a){return f.siblingsAnchors.to[a]||[]},getComponentAnchorToParent:function(a){return f.childToParentAnchors.from[a]}})}var c={SITE_FOOTER:!0,SITE_HEADER:!0,SITE_PAGES:!0,PAGES_CONTAINER:!0,masterPage:!0,SITE_BACKGROUND:!0};return function(a,b,c){return new e(a,b,c)}}),define("layout/util/reduceDistancesAlgorithm/createMeasureMapManager",["lodash","utils"],function(a,b){"use strict";function c(a,c,d){return b.boundingLayout.getBoundingHeight({height:a,width:c,rotationInDegrees:d})}function d(a,c,d,e){return b.boundingLayout.getBoundingY({y:a,height:c,width:d,rotationInDegrees:e})}function e(b,e){return a(e).pick(function(b){return a.get(b,"layout.rotationInDegrees")}).mapValues(function(a,e){var f=b.top[e],g=b.height[e],h=b.width[e],i=c(g,h,a.layout.rotationInDegrees),j=d(f,g,h,a.layout.rotationInDegrees);return{heightDiff:i-g,yDiff:j-f}}).value()}function f(b,c){function g(b){return a.get(f,[b,"yDiff"],0)}function h(b){return a.get(f,[b,"heightDiff"],0)}var d=b,f=e(b,c);a.merge(this,{get:function(){return d},getComponentTop:function(b){return a.isUndefined(d.top[b])?void 0:d.top[b]+g(b)},getComponentHeight:function(b){return a.isUndefined(d.height[b])?void 0:d.collapsed[b]?0:d.height[b]+h(b)},getComponentMinHeight:function(a){return d.collapsed[a]?0:d.minHeight[a]},getContainerHeightMargin:function(a){return d.containerHeightMargin[a]||0},isCollapsed:function(a){return Boolean(d.collapsed[a])},isShrinkableContainer:function(a){return Boolean(d.shrinkableContainer[a])},getComponentWidth:function(a){return d.width[a]},getClientSize:function(){return{width:d.clientWidth,height:d.clientHeight}},setComponentTop:function(a,b){d.top[a]=b-g(a)},setComponentHeight:function(a,b){d.height[a]=b-h(a)}})}return function(a,b){return new f(a,b)}}),define("layout/util/reduceDistancesAlgorithm/createOriginalValuesManager",["lodash"],function(a){"use strict";function b(b,c){a.merge(this,{getOriginalTop:function(d){var e=a.get(b,[d,"top"]);return e||c[d].layout.y},getOriginalHeight:function(d){var e=a.get(b,[d,"height"]);return e||c[d].layout.height}})}return function(a,d){return new b(a,d)}}),define("layout/util/reduceDistancesAlgorithm/reduceDistancesAlgorithmDataUtils",["lodash","coreUtils","utils","layout/util/reduceDistancesAlgorithm/createAnchorsDataManager","layout/util/reduceDistancesAlgorithm/createMeasureMapManager","layout/util/reduceDistancesAlgorithm/createOriginalValuesManager"],function(a,b,c,d,e,f){"use strict";function h(c,d){function f(c){e[c.id]=c;var g=b.dataUtils.getChildrenData(c,d);a.forEach(g,f)}var e={};return f(c),e}function i(c,d){function f(c){var e=g[c.id],h=b.dataUtils.getChildrenKey(c,d),i={};return e?i[h]=a.reduce(c[h],function(b,c){return a.includes(e,c.id)&&b.push(f(c)),b},[]):i[h]=[],a.assign({},c,i)}var e=a.find(g.ROOT,function(a){return a===c.id});return e?f(c):null}function j(a,b,c){return b?i(a,c):a}function k(b,c,e,f,g){var h=a.get(c,[b.id,e]);return h=a.merge({},h,g.injectedAnchors),d(h,f,g.shrinkableContainer)}function l(b,c,d,e){var g=a.get(c,[b.id,d]);return f(g,e)}function m(d){return a.mapValues(d,function(d){var e=d.layout?a.defaults(b.boundingLayout.getBoundingLayout(d.layout),d.layout):{};return c.layout.isVerticallyStretchedToScreen(e)&&(delete e.docked.top,delete e.docked.bottom),e})}var g={ROOT:["masterPage","SITE_BACKGROUND"],masterPage:["SITE_HEADER","PAGES_CONTAINER","SITE_FOOTER"],PAGES_CONTAINER:["SITE_PAGES"]};return{generateEnforceData:function(a,b,d,f,g,i,n){var o=g?c.constants.VIEW_MODES.MOBILE:c.constants.VIEW_MODES.DESKTOP,p=h(a,g),q=j(a,i,g);return{structure:q,skipEnforce:!q,flatDataMap:p,layoutsMap:m(p),measureMapManager:e(b,p),anchorsDataManager:k(a,d,o,i,b),originalValuesManager:l(a,f,o,p),isMobileView:g,lockedCompsMap:n||{}}}}}),define("layout/util/reduceDistancesAlgorithm/minHeightDataUtils",["lodash"],function(a){"use strict";function b(a){var b=a.absoluteHeight;if(a.topPercents||a.bottomPercents){var c=(a.topPercents||0)+(a.bottomPercents||0),d=1-c/100;return Math.ceil(b/d)}return b}function c(b,c){return a.reduce(b,function(a,b){var d=Math.ceil(b.topPercents/100*c),e=Math.ceil(b.bottomPercents/100*c),f=d+b.absoluteHeight+e;return f>a?f:a},c)}function d(a){return!a.topPercents&&!a.bottomPercents}function e(a,b,c){this.absoluteHeight=a||0,b&&(this.topPercents=b),c&&(this.bottomPercents=c)}function f(a,b,c){return new e(a,b,c)}function g(a){return new e(a.px,a.pct)}function h(a){return new e(a.px,null,a.pct)}function i(a,b){this.absoluteHeight=a,this.dynamicHeights=b}function j(b){var c=0,e=[];return a.forEach(b,function(a){d(a)?c=Math.max(c,a.absoluteHeight):e.push(a)}),new i(c,e)}return e.prototype.clone=function(){return new e(this.absoluteHeight,this.topPercents,this.bottomPercents)},e.prototype.addAbsoluteHeight=function(a){return this.absoluteHeight+=a,this},e.prototype.addMinHeightData=function(a){this.absoluteHeight+=a.absoluteHeight;var b=(this.topPercents||0)+(a.topPercents||0);b&&(this.topPercents=b);var c=(this.bottomPercents||0)+(a.bottomPercents||0);return c&&(this.bottomPercents=c),this},i.prototype.merge=function(a){return this.dynamicHeights=this.dynamicHeights.concat(a.dynamicHeights),this.absoluteHeight=Math.max(this.absoluteHeight,a.absoluteHeight),this},i.prototype.solve=function(){if(a.isEmpty(this.dynamicHeights))return this.absoluteHeight;var d=Math.ceil(a(this.dynamicHeights).map(b).max()),e=Math.max(this.absoluteHeight,d);return c(this.dynamicHeights,e)},{createMinHeightData:f,createMinHeightDataForDockedTopData:g,createMinHeightDataForDockedBottomData:h,createChainMinHeightData:j}}),define("layout/util/reduceDistancesAlgorithm/reduceDistancesAlgorithmUtils",[],function(){"use strict";var a=10;return{getAnchorMinDistance:function(b){return b.locked?b.distance:a}}}),define("layout/util/reduceDistancesAlgorithm/enforceComponentsMinHeight",["lodash","coreUtils","utils","layout/util/reduceDistancesAlgorithm/minHeightDataUtils","layout/util/reduceDistancesAlgorithm/reduceDistancesAlgorithmUtils","layout/util/reduceDistancesAlgorithm/anchorsTypes"],function(a,b,c,d,e,f){"use strict";function h(b,c){return a.sortBy(b,function(a){return c.getOriginalTop(a.id)})}function i(a){var b=c.layout.getDockToDirection(a,"top");return b?d.createMinHeightDataForDockedTopData(b):d.createMinHeightData(a.y)}function j(a,b,e){var f=d.createMinHeightData(),g=i(a),h=c.layout.isDockedToDirection(a,"top"),j=b||h||!e||g.absoluteHeight<0;return j?g:f}function k(b,c,d){var g=d.type===f.TOP_TOP?0:c,h=e.getAnchorMinDistance(d);return a.map(b,function(a){var b=g+h;return a.clone().addAbsoluteHeight(b)})}function l(f,g,i,l,m,n,o,p){function s(a,b){b&&b.locked&&(q.isShrinkableContainer=!0),q.chainsMinHeightData.merge(a)}function t(a,b){var c=p[a.id];return{forNonDocked:[j(c,b,!1)],forDocked:[j(c,b,!0)]}}function u(b,c){var e=!1,f=[],g=[];if(a.forEach(c,function(a){a.locked&&(e=!0);var b=r[a.fromComp],c=n[a.fromComp];f=f.concat(k(b.forDocked,c,a)),g=g.concat(k(b.forNonDocked,c,a))}),!e){var h=o.getOriginalTop(b.id),i=d.createMinHeightData(h);g.push(i)}return{forDocked:f,forNonDocked:g}}function v(a){var f,b=c.layout.getDockToDirection(p[a.id],"bottom");if(b)f=d.createMinHeightDataForDockedBottomData(b);else{var g=i.getComponentAnchorToParent(a.id);f=d.createMinHeightData(e.getAnchorMinDistance(g))}var h=n[a.id];return f.clone().addAbsoluteHeight(h)}function w(b,c,e){var g=c?e.forDocked:e.forNonDocked,h=v(b,f),i=a.map(g,function(a){return a.clone().addMinHeightData(h)});return d.createChainMinHeightData(i)}function x(b){var d=i.getComponentPushers(b.id),e=a.isEmpty(d),f=!!m[b.id],g=e||f?t(b,f):u(b,d);r[b.id]=g;var h=i.getComponentAnchorToParent(b.id),j=!!h,k=c.layout.isDockedToDirection(p[b.id],"bottom"),l=k||j;if(l){var n=w(b,k,g);s(n,h)}}function y(){var c=h(b.dataUtils.getChildrenData(f,l),o);return a.forEach(c,function(a){x(a)}),q.value=q.chainsMinHeightData.solve(),delete q.chainsMinHeightData,q}var q={value:0,chainsMinHeightData:d.createChainMinHeightData(),isShrinkableContainer:!1},r={};return y()}var g=0;return function(d,e,f,h,i,j,k){function n(b,c,d){var f=[],i=a.get(k,[b.id,"aspectRatio"],0),j=d||i||e.isShrinkableContainer(b.id)||c&&c.isShrinkableContainer;if(i){var l=e.getComponentWidth(b.id);f.push(i*l)}if(c&&(f.push(c.value+e.getContainerHeightMargin(b.id)),!j)){var m=h.getOriginalHeight(b.id);f.push(m)}if(j){var n=e.getComponentMinHeight(b.id)||g;f.push(n)}return f}function o(b,c,d){d?(c.length&&e.setComponentHeight(b,a.max(c)),m[b]=e.getComponentHeight(b)):m[b]=c.length?a.max(c):0}function p(a,b){if(e.isCollapsed(a.id))return e.setComponentHeight(a.id,0),void(m[a.id]=0);var d=c.layout.isVerticallyStretched(k[a.id]),f=n(a,b,d);o(a.id,f,!d)}function q(a){return!e.isCollapsed(a)}function r(c){var g,d=b.dataUtils.getChildrenData(c,i),n=j[c.id];!a.isEmpty(d)&&q(c.id)&&(a.forEach(d,r),n||(g=l(c,e,f,i,j,m,h,k))),p(c,g)}var m={};r(d)}}),define("layout/util/reduceDistancesAlgorithm/enforceAnchorsAndDocking",["lodash","coreUtils","utils","layout/util/reduceDistancesAlgorithm/reduceDistancesAlgorithmUtils","layout/util/reduceDistancesAlgorithm/anchorsTypes"],function(a,b,c,d,e){"use strict";function f(b,c){return a.sortBy(b,function(a){return c.getOriginalTop(a.id)})}function g(a,b,d){var e=d.getComponentHeight(b),f=d.getComponentWidth(b),g=d.getClientSize();return c.positionAndSize.getHeightInPixelsRounded(a,{width:f,height:e},g)}function h(a,b,d,e){var f={width:e.getComponentWidth(d),height:e.getComponentHeight(d)},g=e.getClientSize(),h=e.getComponentHeight(a);return c.positionAndSize.getYInPixelsRounded(b,f,g,h)}function i(b,c,f,g){var h=[],i=a.every(c,{locked:!1});return a.forEach(c,function(a){if(i){var c=f.getOriginalTop(b);h.push(c)}var j=g.getComponentTop(a.fromComp),k=a.type===e.TOP_TOP?0:g.getComponentHeight(a.fromComp),l=d.getAnchorMinDistance(a),m=j+k+l;h.push(m)}),a.max(h)}function j(b,c){var f=[];return a.some(b,"locked")?(a.forEach(b,function(a){var b=c.getComponentTop(a.fromComp),g=a.type===e.TOP_TOP?0:c.getComponentHeight(a.fromComp),h=d.getAnchorMinDistance(a),i=b+g+h;f.push(i)}),a.max(f)):null}function k(a){return c.layout.isDockedToDirection(a,"bottom")}return function(e,m,n,o,p,q,r){function s(a,b){var c=h(a.id,r[a.id],b,m);m.setComponentTop(a.id,c)}function t(a,b,c,d){if(c&&d&&!m.isCollapsed(a.id)){var e=g(r[a.id],b,m);m.setComponentHeight(a.id,e)}}function u(a,b,c,d){s(a,b.id),t(a,b.id,c,d)}function v(b){var c=n.getComponentPushers(b.id);if(!a.isEmpty(c)){var d=j(c,m);null!==d&&m.setComponentTop(b.id,d)}}function w(b){var c=n.getComponentPushers(b.id);if(!a.isEmpty(c)&&!q[b.id]){var d=i(b.id,c,o,m);m.setComponentTop(b.id,d)}}function x(b,d){a.forEach(b,function(a){var b=c.layout.isDockedToDirection(r[a.id],"top"),e=c.layout.isDockedToDirection(r[a.id],"bottom");b||e?u(a,d,b,e):w(a)})}function y(b,d){a.forEach(b,function(a){var b=c.layout.isDockedToDirection(r[a.id],"top"),e=c.layout.isDockedToDirection(r[a.id],"bottom");b||e||v(a,d)})}function z(b){function e(a,b){var d=m.getComponentTop(a),e=b-m.getComponentHeight(a);return e>=d?null:(m.setComponentTop(a,e),c=!0,e)}function f(b,c){var g=b.fromComp,h=d.getAnchorMinDistance(b),i=c-h,j=e(g,i);if(null!==j){var k=n.getComponentPushers(g);a.forEach(k,function(a){f(a,j)})}}function g(b){var c=m.getComponentTop(b),d=n.getComponentPushers(b);a.forEach(d,function(a){f(a,c)})}var c=!1,h=a.filter(b,function(a){return k(r[a.id])});return a.forEach(h,function(a){g(a.id)}),c}function A(a){return!m.isCollapsed(a)}function B(c){var d=b.dataUtils.getChildrenData(c,p);if(!a.isEmpty(d)&&A(c.id)){var e=f(d,o);x(e,c);var g=z(e);g&&y(e,c),a.forEach(d,B)}}B(e)}}),define("layout/util/reduceDistancesAlgorithm/reduceDistancesAlgorithm",["layout/util/reduceDistancesAlgorithm/enforceComponentsMinHeight","layout/util/reduceDistancesAlgorithm/enforceAnchorsAndDocking"],function(a,b){"use strict";return{enforce:function(c){return c.skipEnforce||(a(c.structure,c.measureMapManager,c.anchorsDataManager,c.originalValuesManager,c.isMobileView,c.lockedCompsMap,c.layoutsMap),b(c.structure,c.measureMapManager,c.anchorsDataManager,c.originalValuesManager,c.isMobileView,c.lockedCompsMap,c.layoutsMap)),c.flatDataMap}}}),define("layout/util/layoutAlgorithm",["lodash","experiment","utils","layout/util/anchors","layout/util/reduceDistancesAlgorithm/reduceDistancesAlgorithmDataUtils","layout/util/reduceDistancesAlgorithm/reduceDistancesAlgorithm"],function(a,b,c,d,e,f){"use strict";return{enforceStructure:function(g,h,i,j,k,l,m,n,o){var p=k?c.constants.VIEW_MODES.MOBILE:c.constants.VIEW_MODES.DESKTOP,q=a.get(i,[g.id,p]);if(b.isOpen("layout_verbs_with_anchors")){var r=e.generateEnforceData(g,h,i,j,k,l,m);return f.enforce(r)}return d.enforceAnchors(g,h,q,k,l,m,n,o)}}}),define("layout/util/createDOMPatchers",["zepto","lodash","utils"],function(a,b,c){"use strict";function d(b,d,e){b[d]?a(b[d]).css(e):c.log.error("Cannot find node with id {"+d+"} to patch css. Either the node doesnt exist, or it was never measured, or it was measured undeer a different id.")}function e(b,d,e){b[d]?a(b[d]).attr(e):c.log.error("Cannot find node with id {"+d+"} to patch attributes. Either the node doesnt exist, or it was never measured, or it was measured undeer a different id.")}function f(d,e,f){if(d[e]){var g=a(d[e]);b.forOwn(f,function(a,b){g.data(b,a)})}else c.log.error("Cannot find node with id {"+e+"} to patch data. Either the node doesnt exist, or it was never measured, or it was measured undeer a different id.")}function g(a){return{css:b.partial(d,a),attr:b.partial(e,a),data:b.partial(f,a)}}return g}),define("layout/util/rootLayoutUtils",["lodash","utils"],function(a,b){"use strict";return{getRootWidth:function(a,d,e){return b.layout.getRootWidth(d,e,a.getSiteWidth())},getRootLeft:function(a,c,e){return b.layout.getRootLeft(c,e,a.getSiteX())}}}),define("layout/util/singleCompLayout",["lodash","utils","experiment","layout/util/rootLayoutUtils"],function(a,b,c,d){"use strict";function l(a){return"fixed"===a.position}function m(a){return b.layout.isHorizontallyStretched(a.layout)}function n(a){return h[a.componentType]}function o(a){return b.layout.isVerticallyStretched(a.layout)}function p(a){return h[a.componentType]}function q(a,b,c){var d=c.zIndex;"auto"!==d&&(d=parseFloat(d),isNaN(d)||(a.zIndex[b]=d))}function r(a,b,c,d){l(d)&&(a.fixed[b]=!0,a.top[b]=c.offsetTop,a.left[b]=c.offsetLeft)}function s(b,c,d,e){var f=a.get(e,"layout.width",0);m(e)?b.width[c]=d.offsetWidth:n(e)||!a.get(e,"layout.width")?b.width[c]=Math.max(d.offsetWidth,f):(b.width[c]=f,b.innerWidth[c]=f||d.clientWidth)}function t(a,b,c){a.top[b]=c.offsetTop}function u(b,c,d,e){var f=a.get(e,"layout.height",0),g=a.get(e,"layout.aspectRatio",0);g&&(f=g*b.width[c]),o(e)?b.height[c]=d.offsetHeight:p(e)||!a.get(e,"layout.height")?b.height[c]=Math.max(d.offsetHeight,f):b.height[c]=f}function v(b,c,d,e){var f=a.get(e,"layout.width",0),g=a.get(e,"layout.height",0);b.width[c]=f,b.innerWidth[c]=f||d.clientWidth,b.height[c]=g}function w(b,c){var d=c.offsetLeft,e=a.get(b,"layout.x",0),f=Math.abs(e-d);return.5===f?e:d}function x(a,b,c,d){a.left[b]=w(d,c)}function y(a,b,d,e){if(e.isDeadComp[a])return void v(e,a,b,d);var f=window.getComputedStyle(b);r(e,a,b,f),q(e,a,f),s(e,a,b,d),u(e,a,b,d),(c.isOpen("layout_verbs_with_anchors")||c.isOpen("sv_partialReLayout"))&&t(e,a,b),(c.isOpen("sv_hoverBox")||h[d.componentType])&&(x(e,a,b,d),e.width[a]=b.offsetWidth)}function z(a){return a.getAttribute("data-dead-comp")}function A(a,b){if(!a)return!1;var c=b(a);return c?c:!1}function B(a,b,c,d,e,f){var h=b.id,i=A(h,c);if(i){e[h]=i,y(h,i,a,d);var k=z(i);if(k)return void(d.isDeadComp[h]=!0);j[b.type]&&j[b.type](h,d,e,f,b),g[b.type]&&g[b.type](h,d,e,f,b)}}function C(b,c,d,e,f){var h=b.id,j=A(h,c);if(j&&!z(j)&&i[b.type]){var k=i[b.type];"function"==typeof k&&(k=k(f,h,e,b)),a.forEach(k,function(i){var j=a.isPlainObject(i),k=j?i.pathArray:i,l=c.apply(void 0,[h].concat(k));if(l){var m=k.join(""),n=h+m;e[n]=l,d.height[n]=l.offsetHeight,d.width[n]=l.offsetWidth,d.innerWidth[n]=l.clientWidth,j&&g[i.type]&&g[i.type](n,d,e,f,b)}})}}function D(a){return a?a.docked&&(a.docked.vCenter||a.docked.bottom||a.docked.top):!1}function E(a){return a?a.docked&&a.docked.top&&a.docked.bottom:!1}function F(b,c,d,f){var g={};D(f)||(g.top=e(d.top[b])),E(f)||(g.height=e(d.height[b])),a.isEmpty(g)||c.css(b,g)}function G(a,c,e,f,g){var h=f.layout;if(h&&b.dockUtils.isHorizontalDockToScreen(h)){var i=d.getRootWidth(g,e,f.rootId),j=0-d.getRootLeft(g,e,f.rootId),k=b.dockUtils.getDockedStyle(h,g.getPageBottomMargin(),g.getScreenWidth(),i,j);e.left[a]=parseInt(k.left,10),c.css(a,k)}}function H(a,b,c,d,e){var g=a.id,h=a.layout;F(g,b,d,h),G(g,b,d,a,e);var i=d.isDeadComp[g],j=!1;return!i&&f[a.type]?j=f[a.type](g,c,d,a,e):!i&&k[a.type]&&(j=k[a.type](g,b,d,a,e)),j}var e=b.style.unitize,f={},g={},h={},i={},j={},k={};return{patchComponent:H,measureComponent:B,measureComponentChildren:C,isComponentDead:z,registerPatcher:function(a,b){f[a]=b},registerSAFEPatcher:function(a,b){k[a]=b},registerPatchers:function(b,c){f[b]=function(){var b=arguments;a.forEach(c,function(a){a.apply(null,b)})}},registerSAFEPatchers:function(b,c){k[b]=function(){var b=arguments;a.forEach(c,function(a){a.apply(null,b)})}},registerCustomMeasure:function(a,b){g[a]=b},registerRequestToMeasureDom:function(a){h[a]=!0},registerRequestToMeasureChildren:function(a,b){i[a]=b},registerAdditionalMeasureFunction:function(a,b){j[a]=b},maps:{classBasedMeasureChildren:i,classBasedCustomMeasures:g,classBasedPatchers:f}}}),define("layout/util/layout",["zepto","lodash","layout/util/anchors","layout/util/layoutAlgorithm","utils","coreUtils","layout/util/createDOMPatchers","layout/util/singleCompLayout","experiment"],function(a,b,c,d,e,f,g,h,i){"use strict";function n(a,c){var d=b.last(a),e=f.dataUtils.getChildrenData(d,c);return b.transform(e,function(a,b){a[b.id]=!0},{})}function p(a,b,c){return a&&Math.max(b,Math.min(c,a))}function r(a,d){if(i.isOpen("sv_partialReLayout"))return!(!a||a[d.id]);var e=a;return e&&!e[d.id]&&!c.HARD_WIRED_COMPS[d.id]&&!b.has(q,d.type)}function s(a){return a.componentType||a.documentType}function t(a,c,d){var e=c.getSiteData(),g=a.layout,h={dataItem:null,propertiesItem:null,layout:g,styleItem:null,id:a.id,type:s(a),structure:a,rootId:d};return h.layout&&(b.isFinite(h.layout.height)&&(h.layout.height=p(h.layout.height,f.siteConstants.COMP_SIZE.MIN_HEIGHT,f.siteConstants.COMP_SIZE.MAX_HEIGHT)),b.isFinite(h.layout.width)&&(h.layout.width=p(h.layout.width,f.siteConstants.COMP_SIZE.MIN_WIDTH,f.siteConstants.COMP_SIZE.MAX_WIDTH))),a.dataQuery&&(h.dataItem=c.getRuntimeDal().getCompData(a.id)||e.getDataByQuery(a.dataQuery,d)),a.propertyQuery&&(h.propertiesItem=c.getRuntimeDal().getCompProps(a.id)||e.getDataByQuery(a.propertyQuery,d,e.dataTypes.PROPERTIES)),(a.behaviorQuery||a.behaviors)&&(h.behaviorsItem=c.getRuntimeDal().getActionsAndBehaviors(a.id),h.behaviorsItem||(h.behaviorsItem=a.behaviors||b.get(e.getDataByQuery(a.behaviorQuery,d,e.dataTypes.BEHAVIORS),"items"))),a.designQuery&&(h.designDataItem=e.getDataByQuery(a.designQuery,d,e.dataTypes.DESIGN)),a.styleId&&(h.styleItem=e.getDataByQuery(a.styleId,d,e.dataTypes.THEME)),h}function u(a,b){return Boolean(b.collapsed[a])}function v(a,c,d,e,f,g,j){var k=f.getSiteData(),l=[],m=b(d).keys().filter(function(a){return!u(a,e)}).value();return b.forEach(m,function(b){var m=t(d[b],f,g);if(i.isOpen("sv_partialReLayout")||!r(j,m)){var n=h.patchComponent(m,a,c,e,k);n&&l.push(b)}}),l}function w(a,c,d,e,f,h){var i=[],j=g(d);return b.forEach(a,function(a,b){i=i.concat(v(j,d,e[b],c,f,a.pageId,h))}),i}function x(b,c,d,e,f,g,h){var i=a(c(b.id));i.attr("data-leaving")||(i.attr("data-collapsed")?y(b,c,d,e,f,g,h):l[b.componentType]?z(b,c,d,e,f,g,h):A(b,c,d,e,f,g,h))}function y(a,b,c,d,e,f,g){var h=e.getSiteData(),i=t(a,e,f);r(g,i)||(B(a,b,d),c.collapsed[a.id]=!0,D(i,b,c,d,h,a,g))}function z(a,b,c,d,e,f,g){var h=e.getSiteData(),i=t(a,e,f);B(a,b,d),C(i,e,b,c,d,f,g),D(i,b,c,d,h,a,g)}function A(a,b,c,d,e,f,g){var h=e.getSiteData(),i=t(a,e,f);B(a,b,d),D(i,b,c,d,h,a,g),C(i,e,b,c,d,f,g)}function B(a,b,c){var d=b(a.id);d&&(c[a.id]=d)}function C(a,c,d,e,g,h,i){var j=c.getSiteData(),k=f.dataUtils.getChildrenData(a.structure,j.isMobileView());b.forEach(k,function(a){x(a,d,e,g,c,h,i)})}function D(a,b,c,d,e,f,g){r(g,a)||(h.measureComponentChildren(a,b,c,d,e),h.measureComponent(f,a,b,c,d,e))}function E(a,c,d,e,f){b.forOwn(a,function(a){x(a.structure,a.getDomNodeFunc,c,d,e,a.pageId,f)})}function F(a,c,e,f,g,h){var k,i={},j=e.getSiteData();j.anchorsMap=j.anchorsMap||{},j.originalValuesMap=j.originalValuesMap||{};var l=j.isMobileView();return a.inner&&(k=j.isRootIgnoreBottomBottom(b.get(a,"inner.structure.id")),i.inner=d.enforceStructure(a.inner.structure,c,j.anchorsMap,j.originalValuesMap,l,f,g,h,k),c.height.SITE_PAGES&&(c.height.SITE_PAGES=c.height[a.inner.pageId])),b.forOwn(a,function(a,e){"inner"!==e&&(k=j.isRootIgnoreBottomBottom(b.get(a,["structure","id"])),i[e]=d.enforceStructure(a.structure,c,j.anchorsMap,j.originalValuesMap,l,f,g,h,k))}),i}function G(a,c,d,e,g){var h=d.getSiteData(),i=a.id;i&&(c.fixed[i]?(e=c.top[i],g=c.left[i]):(e+=c.top[i],g+=c.left[i]||0),c.absoluteTop[i]=e,c.absoluteLeft[i]=g);var j=f.dataUtils.getChildrenData(a,h.isMobileView());b.forEach(j,function(a){G(a,c,d,e,g)})}function H(a,c,d){var e=b.sortBy(b.keys(a),function(a){return"inner"===a?1:0});b.forEach(e,function(b){G(a[b].structure,c,d,"inner"===b?c.absoluteTop.SITE_PAGES:0,"inner"===b?c.absoluteLeft.SITE_PAGES:0)})}function I(a,c,d,e){var g=a.id&&c(a.id);if(!g||!h.isComponentDead(g)){g&&k[a.componentType]&&e.push({structure:a,getDomNodeFunc:c,domNode:g});var i=d.getSiteData().isMobileView(),j=f.dataUtils.getChildrenData(a,i);b.forEach(j,function(a){I(a,c,d,e)})}}function J(a,d,e,f,g,h,i,j,l){var m=[],n={},o=g.getSiteData(),p=o.isMobileView();return b.forEach(a,function(a){var e=t(a.structure,g),q=k[e.structure.componentType].measure(e,a.domNode,d,f,o,function(b){x(b,a.getDomNodeFunc,d,f,g,e.rootId,j)},function(a){return c.enforceAnchors(a,d,l,p,i,h,j)});q.needsAdditionalInnerLayout&&m.push(a),q.changedCompsMap&&b.assign(n,q.changedCompsMap)}),b.forEach(a,function(a){var b=t(a.structure,g);a.skipPatch||k[b.structure.componentType].patch(b,d,e,f,g.getSiteData())}),{compsToInnerLayoutAgain:m,changedComps:n}}function K(a,c,d,e,f,h,i){var j=e.getSiteData(),k=j.getViewMode(),l={},m=[],n={};b.forOwn(a,function(a){I(a.structure,a.getDomNodeFunc,e,m);var c=b.get(a,"structure.id"),d=b.get(j.anchorsMap,[c,k]);b.assign(n,d)});for(var o=m,p=0,q=g(d);o.length&&3>p;){var r=J(o,c,q,d,e,f,h,i,n);o=r.compsToInnerLayoutAgain,l=b.assign(l,r.changedComps),p++}return l}function M(c){L=L||a("#SITE_ROOT");var d=L.offset()||{top:0},e={pageBottomByComponents:{},collapsed:{},height:{},width:{},innerWidth:{},innerHeight:{},custom:{},containerHeightMargin:{},minHeight:{},minWidth:{},top:{},left:{},absoluteTop:{},absoluteLeft:{},fixed:{},zIndex:{},isDeadComp:{},siteMarginBottom:b.parseInt(L.css("padding-bottom"),10)||0,siteOffsetTop:d.top,clientWidth:0,skipPatch:{},shrinkableContainer:{},injectedAnchors:{}};return e.clientWidth=c.getBodyClientWidth(),i.isOpen("onboardingviewportmode")?e.clientHeight=N(c):e.clientHeight=document.documentElement.clientHeight,e.width.screen=c.getScreenWidth(),e.height.screen=e.clientHeight,e.innerHeight.screen=window.innerHeight,e.innerWidth.screen=window.innerWidth,e}function N(a){var c=b.get(a.renderFlags,"onboardingViewportMode","auto");
return"parent"===c?window.parent.document.documentElement.clientHeight:/fixed:/.test(c)?parseInt(c.split(":")[1],10):document.documentElement.clientHeight}function O(a,c){return b.forOwn(c,function(b,c){delete a.top[c]}),a}function P(a,c){var d=b.last(a);return d&&o[d.componentType]?o[d.componentType](a,c):null}function Q(a,c,d){var e=b.last(a),g={};c[e.id]&&b.assign(g,P(a,d));var h=f.dataUtils.getChildrenData(e,d);return b.forEach(h,function(e){b.assign(g,Q(a.concat([e]),c,d))}),g}function R(a,c,d){var e={};return b.forOwn(c,function(c){b.assign(e,Q([c.structure],a,d))}),e}function S(a,d,e,g,h){var i={};return b.assign(i,d,e,c.HARD_WIRED_COMPS,f.arrayUtils.toTrueObj(g)),b.assign(i,R(i,a,h)),i}function T(a){var c=b(a).values().map(b.keys).flatten().value();return f.arrayUtils.toTrueObj(c)}function U(a,b,c,d,f){i.isOpen("sv_reportPerformance")&&(e.performance.clearMeasures(m),e.performance.start(m));var g=b.getSiteData();g.updateScreenSize(),delete a.undefined;var l,h=i.isOpen("sv_partialReLayout")?j[g.siteId]||{}:{},k=!1;i.isOpen("sv_partialReLayout")?l=f?O(g.measureMap,f):M(g):(k=g.measureMap&&d&&c,l=k?O(g.measureMap,d):M(g));var n=K(a,l,h,b,d,c,f);f&&(f=S(a,f,n,b.getAllRenderedRootIds(),g.isMobileView())),i.isOpen("sv_partialReLayout")?E(a,l,h,b,f):E(a,l,h,b,k&&d);var o=F(a,l,b,c,d,f),p=w(a,l,h,o,b,!i.isOpen("sv_partialReLayout")&&k&&d);return H(a,l,b),j[g.siteId]=h,i.isOpen("sv_reportPerformance")&&e.performance.finish(m,!0,{partialReLayout:i.isOpen("sv_partialReLayout")}),{componentsToRender:p,measureMap:l,reLayoutedCompsMap:T(o)}}var L,j={},k={},l={},m="reLayout",o={"wysiwyg.viewer.components.Group":n,"wysiwyg.viewer.components.BoxSlideShow":n,"wysiwyg.viewer.components.StripContainerSlideShow":n,"wysiwyg.viewer.components.StripColumnsContainer":n,"wysiwyg.viewer.components.Column":function(a,c){var d=a[a.length-2],e=f.dataUtils.getChildrenData(d,c),g=[d].concat(e);return b.transform(g,function(a,b){a[b.id]=!0},{})}},q={"mobile.core.components.Page":!0,"wysiwyg.viewer.components.StripColumnsContainer":!0,"wysiwyg.viewer.components.Column":!0};return{registerLayoutInnerCompsFirst:function(a,b,c){k[a]={measure:b,patch:c}},registerMeasureChildrenFirst:function(a,b){l[a]=b},registerPatcher:function(a,b){h.registerPatcher(a,b)},registerSAFEPatcher:function(a,b){h.registerSAFEPatcher(a,b)},registerSAFEPatchers:function(a,b){h.registerSAFEPatchers(a,b)},registerPatchers:function(a,b){h.registerPatchers(a,b)},registerCustomMeasure:function(a,b){h.registerCustomMeasure(a,b)},registerAdditionalMeasureFunction:function(a,b){h.registerAdditionalMeasureFunction(a,b)},registerRequestToMeasureDom:function(a){h.registerRequestToMeasureDom(a)},registerRequestToMeasureChildren:function(a,b){h.registerRequestToMeasureChildren(a,b)},reLayout:U,enforceAnchors:c.enforceAnchors}}),define("layout/specificComponents/wixHomepageMenuLayout",["layout/util/layout"],function(a){"use strict";a.registerRequestToMeasureChildren("wysiwyg.viewer.components.wixhomepage.WixHomepageMenu",[["buttonsContainer"]]),a.registerCustomMeasure("wysiwyg.viewer.components.wixhomepage.WixHomepageMenu",function(a,b){var c=b.height[a+"buttonsContainer"];b.height[a]=Math.max(b.height[a],c),b.minHeight[a]=c})}),define("layout/specificComponents/fiveGridLineLayout",["layout/util/layout","layout/util/rootLayoutUtils"],function(a,b){"use strict";var c=function(a,c,d,e,f){var g=d.width.screen,h=b.getRootWidth(f,d,e.rootId),i=0,j=h,k=e.propertiesItem;k&&k.fullScreenModeOn&&(g>h&&(i=-(g-h)/2,j=g),c.css(a,{width:j+"px",left:i+"px"}),d.width[a]=j,d.left[a]=i)};a.registerSAFEPatcher("wysiwyg.viewer.components.FiveGridLine",c),a.registerRequestToMeasureChildren("wysiwyg.viewer.components.FiveGridLine",[["line"]]),a.registerRequestToMeasureDom("wysiwyg.viewer.components.FiveGridLine"),a.registerCustomMeasure("wysiwyg.viewer.components.FiveGridLine",function(a,b,c){var d=b.height[a+"line"],e=window.getComputedStyle(c[a]),f=parseFloat(e.borderBottomWidth);b.height[a]=Math.max(5,f,d),b.minHeight[a]=d})}),define("layout/specificComponents/domainSearchLayout",["lodash","layout/util/layout"],function(a,b){"use strict";function c(a,b){var c=a+"content";[["width","minWidth"],["height","minHeight"]].forEach(function(d){var e=d[0],f=d[1];b[e][c]>b[e][a]&&(b[f]||(b[f]={}),b[e][a]=b[f][a]=b[e][c])})}return b.registerRequestToMeasureChildren("wysiwyg.common.components.domainsearchbar.viewer.DomainSearchBar",[["content"]]),b.registerCustomMeasure("wysiwyg.common.components.domainsearchbar.viewer.DomainSearchBar",c),{}}),define("layout/specificComponents/registerToMeasureOnly",["layout/util/layout"],function(a){"use strict";return a.registerRequestToMeasureDom("wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt"),a.registerRequestToMeasureDom("wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow"),a.registerRequestToMeasureDom("wysiwyg.common.components.spotifyplayer.viewer.SpotifyPlayer"),a.registerRequestToMeasureDom("wysiwyg.viewer.components.Video"),a.registerRequestToMeasureDom("wysiwyg.viewer.components.WTwitterTweet"),a.registerRequestToMeasureDom("wysiwyg.common.components.disquscomments.viewer.DisqusComments"),a.registerRequestToMeasureChildren("wysiwyg.viewer.components.PaginatedGridGallery",[["itemsContainer"]]),{}}),define("layout/specificComponents/registerToPureDomMeasure",["layout/util/layout"],function(a){"use strict";function b(b){a.registerCustomMeasure(b,function(a,b,c){var d=c[a];b.height[a]=d.offsetHeight,b.width[a]=d.offsetWidth})}return b("wysiwyg.viewer.components.FlashComponent"),b("wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt"),b("wysiwyg.viewer.components.WGooglePlusOne"),b("wysiwyg.viewer.components.LinkBar"),b("wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer"),b("wysiwyg.common.components.facebooklikebox.viewer.FacebookLikeBox"),b("wysiwyg.viewer.components.PayPalButton"),b("wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow"),b("wysiwyg.viewer.components.FlickrBadgeWidget"),b("wysiwyg.viewer.components.WTwitterFollow"),b("wysiwyg.viewer.components.WTwitterTweet"),b("wysiwyg.common.components.skypecallbutton.viewer.SkypeCallButton"),{}}),define("layout/specificComponents/areaTooltipLayout",["layout/util/layout"],function(a){"use strict";a.registerCustomMeasure("wysiwyg.common.components.areatooltip.viewer.AreaTooltip",function(a,b){var c=a+"content";b.custom[a]=b.height[a]/2-b.height[c]/2}),a.registerSAFEPatcher("wysiwyg.common.components.areatooltip.viewer.AreaTooltip",function(a,b,c,d){var e,f,g,h;if(f=a+"tooltip",c.height[f]){e=a+"content";var i=d.propertiesItem.tooltipPosition;switch(i){case"top":h=-c.height[e]-14+"px",g=0;break;case"right":h=c.custom[a]+"px",g=c.width[a]+14+"px";break;case"bottom":h=c.height[a]+14+"px",g=0;break;case"left":h=c.custom[a]+"px",g="-414px";break;default:return}b.css(f,{top:h,left:g})}}),a.registerRequestToMeasureChildren("wysiwyg.common.components.areatooltip.viewer.AreaTooltip",[["tooltip"],["content"]])}),define("layout/specificComponents/menuLayout",["zepto","lodash","layout/util/layout","utils"],function(a,b,c,d){"use strict";function f(a,b,c,d,e,f,g){for(var h=0,i=null,j=c.custom[a].lineHeight,k=f-g.height,l=0;l<d.length;l++){var m=e[l],n=m>0,o=d[l],p=a+o;n?(h++,i=p,b.css(p,{width:m+"px",height:k+"px",position:"relative","box-sizing":"border-box",overflow:"visible"}),c.custom[a].labelNodes[o].css({"line-height":j})):b.css(p,{height:"0px",overflow:"hidden",position:"absolute"})}1===h&&(b.data(a+"moreContainer",{listposition:"lonely"}),b.data(i,{listposition:"lonely"}))}function g(a,c,d,g,h){var i=d.height[a],j=e.nonHiddenPageIdsFromMainMenu(h),l=j.concat("__more__"),m=d.custom[a];k(a,c,m.needToOpenMenuUp);var n=m.menuItemContainerExtraPixels;m.originalGapBetweenTextAndBtn&&b.forEach(l,function(b){m.hasOriginalGapData[b]||c.data(a+b,{originalGapBetweenTextAndBtn:m.originalGapBetweenTextAndBtn[a+b]})}),c.css(a,{height:i}),c.css(a+"itemsContainer",{height:i-m.menuBorderY-m.ribbonExtra-m.ribbonEls+"px"}),f(a,c,d,l,m.realWidths,i,n)}function h(b){var c=b.lastChild,d=parseInt(a(c).css("margin-left"),10)||0,e=parseInt(a(c).css("margin-right"),10)||0;return d+e}function i(a){var b=parseFloat(a);return isFinite(b)?b:0}function j(b,c){var d=a(b).css(["border-top-width","border-bottom-width","border-left-width","border-right-width","padding-top","padding-bottom","padding-left","padding-right","margin-top","margin-bottom","margin-left","margin-right"]),e=i(d["border-top-width"])+i(d["padding-top"]),f=i(d["border-bottom-width"])+i(d["padding-bottom"]),g=i(d["border-left-width"])+i(d["padding-left"]),h=i(d["border-right-width"])+i(d["padding-right"]);return c&&(e+=i(d["margin-top"]),f+=i(d["margin-bottom"]),g+=i(d["margin-left"]),h+=i(d["margin-right"])),{top:e,bottom:f,left:g,right:h,height:e+f,width:g+h}}function k(a,b,c){b.data(a,{dropmode:c?"dropUp":"dropDown"})}function l(a){var b=a.getBoundingClientRect(),c=b.top;return c>window.innerHeight/2}function m(a){var c=e.nonHiddenPageIdsFromMainMenu(a).concat("__more__"),d=[[]],f=[["moreContainer"],["itemsContainer"]];return b.forEach(d,function(a){f=f.concat(b.map(c,function(b){return[b].concat(a)}))}),f}function n(c,d,f,g,h){var i=d.width[c],j=d.custom[c];j.hasOriginalGapData={},j.originalGapBetweenTextAndBtn={};var k=b.map(h,function(b){var f,e=a(g[c+b]);return e.data("originalGapBetweenTextAndBtn")?(j.hasOriginalGapData[b]=!0,f=parseInt(e.data("originalGapBetweenTextAndBtn"),10)):(j.hasOriginalGapData[b]=!1,f=d.width[c+b]-j.labelWidths[b],j.originalGapBetweenTextAndBtn[c+b]=f),d.width[c+b]>0?j.labelWidths[b]+f:0}),l=k.pop(),m=f.sameWidthButtons,n=f.stretchButtonsToMenuWidth,o=!1,p=j.menuItemContainerMargins,q=j.menuItemMarginForAllChildren,r=j.menuItemContainerExtraPixels,s=e.getMaxWidth(k),t=e.getDropDownWidthIfOk(i,m,n,k,p,s,q,r);if(!t){for(var u=1;u<=k.length;u++)if(t=e.getDropDownWidthIfOk(i,m,n,k.slice(0,-1*u).concat(l),p,s,q,r)){o=!0;break}t||(o=!0,t=[l])}if(o){var v=t[t.length-1];for(t=t.slice(0,-1);t.length<h.length;)t.push(0);t[t.length-1]=v}return{realWidths:t,moreShown:o}}function o(a,b){return d.style.unitize(a-b.menuBorderY-b.labelPad-b.ribbonEls-b.menuButtonBorder-b.ribbonExtra)}function p(c,d,e){return b.reduce(d,function(b,d){return b[d]=a(e[c+d]).find("p"),b},{})}function q(a){return b.mapValues(a,function(a){var b=window.getComputedStyle(a[0]);return parseInt(b.width,10)+parseInt(b.paddingLeft,10)+parseInt(b.paddingRight,10)})}function r(b,c,d,f,g){var i=a(d[b]),k=a("#"+b+"itemsContainer")[0],m=c.custom[b]={menuBorderY:parseInt(i.data("menuborder-y"),10),ribbonExtra:parseInt(i.data("ribbon-extra"),10),ribbonEls:parseInt(i.data("ribbon-els"),10),labelPad:parseInt(i.data("label-pad"),10),menuButtonBorder:parseInt(i.data("menubtn-border"),10),menuItemContainerMargins:h(k),menuItemContainerExtraPixels:j(k,!0),needToOpenMenuUp:l(d[b]),menuItemMarginForAllChildren:!g.propertiesItem.stretchButtonsToMenuWidth||"false"!==k.getAttribute("data-marginAllChildren")},r=c.height[b];m.lineHeight=o(r,m);var s=e.nonHiddenPageIdsFromMainMenu(f).concat("__more__");m.labelNodes=p(b,s,d),m.labelWidths=q(c.custom[b].labelNodes);var t=n(b,c,g.propertiesItem,d,s);m.realWidths=t.realWidths,m.isMoreShown=t.moreShown}var e=d.menuUtils;return c.registerSAFEPatcher("wysiwyg.viewer.components.menus.DropDownMenu",g),c.registerCustomMeasure("wysiwyg.viewer.components.menus.DropDownMenu",r),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.menus.DropDownMenu",m),{}}),define("layout/specificComponents/imageLayout",["lodash","utils","layout/util/layout"],function(a,b,c){"use strict";function g(a,c,d,e,f,g,h,i,j){var k,l=h.custom[a]&&h.custom[a].isZoomed,m=h.custom[a]&&h.custom[a].isSvgImage,n=h.custom[a]&&h.custom[a].filterId,o={imageData:f,containerWidth:l?f.width:g.width,containerHeight:l?f.height:g.height,displayMode:f.displayMode,alignType:j};return o.containerWidth&&o.containerHeight&&f.uri?h.custom[a].hasSvgNode?(k=b.imageUtils.getImageComputedProperties(o,i.getMediaFullStaticUrl.bind(i),i.currentUrl,i.mobile.getDevicePixelRatio(),"svg"),e.css(d,{width:o.containerWidth,height:o.containerHeight}),m?(e.attr(d,k.attr.container),e.attr(c,k.attr.img),e.attr(c,{"xlink:href":k.uri,filter:"url(#"+n+")"}),null):k):k=b.imageUtils.getImageComputedProperties(o,i.getMediaFullStaticUrl.bind(i),i.currentUrl,i.mobile.getDevicePixelRatio(),"img"):null}function h(a,b,c,d){d&&d!==c&&a.attr(b,{src:d})}function i(b,c,i,j,k,l,m){var n=g(c,c+d,c+e,i,k,l,j,b,m);i.css(c+d,a.get(n,["css","img"])),a.has(b,["imageResizeHandlers",c])?b.imageResizeHandlers[c](i,c+d,j.custom[c].imgSrc,a.get(n,"uri")):(h(i,c+d,j.custom[c].imgSrc,a.get(n,"uri")),a.set(b,["imageResizeHandlers",c],a.debounce(h,f,{trailing:!0})))}function j(a,b,c,d,e,f,g){b.css(a,f),i(d,a,b,c,e,f,g)}function k(b,c,f){var g,h=!1;f[b+d]=f[b].querySelector("img")||f[b].querySelector("image"),f[b+e]=f[b].querySelector("svg"),f[b+d]&&"image"===f[b+d].nodeName.toLowerCase()&&(h=!0,g=a.get(f[b].querySelector("filter"),"id")),c.custom[b]={isZoomed:f[b].getAttribute("data-image-zoomed"),isSvgImage:h,filterId:g,hasSvgNode:Boolean(f[b+e]),imgSrc:f[b+d].getAttribute("src")}}var d="image",e="svg",f=250;return c.registerCustomMeasure("core.components.Image",k),{patchNodeImage:j,measureNodeImage:k}}),define("layout/specificComponents/sliderGalleryLayout",["layout/util/layout","utils","imageClientApi","zepto","lodash","galleriesCommon","layout/specificComponents/imageLayout"],function(a,b,c,d,e,f,g){"use strict";function j(a,b,c,d,e){var f=Math.floor(b+a);return h.getSizeAfterScaling({itemHeight:f,itemWidth:Math.floor(f*(e&&e.aspectRatio?e.aspectRatio:1)),displayerData:c,imageMode:e?e.imageMode:"clipImage",heightDiff:d.heightDiff,widthDiff:d.widthDiff,bottomGap:d.bottomGap})}function k(a,b,f,g,h,k,l){var m=d(k),n={imageIndex:m.data("image-index"),width:m.data("displayer-width"),height:m.data("displayer-height"),uri:m.data("displayer-uri")},o={heightDiff:parseInt(m.data("height-diff"),10)||0,widthDiff:parseInt(m.data("width-diff"),10)||0,bottomGap:parseInt(m.data("bottom-gap"),10)||0},p=h&&h[n.imageIndex]?h[n.imageIndex]:n;p=e.assign(p,{displayMode:c.fittingTypes.SCALE_TO_FILL});var q=j(f,b,p,o,g.propertiesItem),r=i.getContainerSize(q.imageWrapperSize,m);return{imageData:p,imageNodeId:a+a+l+"image",imageWrapperId:a+a+l+"imageWrapper",containerSize:r,sizeAfterScaling:q}}function l(a,b,c,f,g){var h=c[a+"images"],i=d(h).children(),j=e.get(g,"dataItem.items"),l=parseInt(d(c[a]).data("additional-height"),10)||0;b.custom[a]={displayers:e.map(i,e.partial(k,a,b.height[a],l,g,j)),additionalHeight:l}}function m(a,b,c,d,f){var h=c.height[a],j=c.width[a];b.css(a,{height:h,width:j});var k=c.custom[a];e.forEach(k.displayers,function(a){i.updateImageWrapperSizes(b,a.imageWrapperId,a.sizeAfterScaling),g.patchNodeImage(a.imageNodeId,b,c,f,a.imageData,a.containerSize)})}function n(a,b){var c=[["images"],["itemsContainer"]],f=d("#"+b+"images").children();return e.forEach(f,function(a){var b={pathArray:[a.id,"image"],type:"core.components.Image"},d=[a.id,"imageWrapper"];c.push(b,d)}),c}var h=f.utils.matrixScalingCalculations,i=b.galleriesCommonLayout;return a.registerRequestToMeasureChildren("wysiwyg.viewer.components.SliderGallery",n),a.registerCustomMeasure("wysiwyg.viewer.components.SliderGallery",l),a.registerSAFEPatcher("wysiwyg.viewer.components.SliderGallery",m),{}}),define("layout/specificComponents/verticalMenuLayout",["zepto","lodash","layout/util/layout","utils","skins"],function(a,b,c,d,e){"use strict";function f(a){var b=a.dataset;return{border:b&&b.paramBorder?parseInt(b.paramBorder,10):0,separator:b&&b.paramSeparator?parseInt(b.paramSeparator,10):0}}function g(b,c,d){var e={"line-height":d+"px"};c&&(e["text-overflow"]="ellipsis"),a(b).css(e)}function h(a,c,f,h,i){c.css(a,{width:f.width[a]});var j=d.menuUtils.getSiteMenuWithoutRenderedLinks(i),k=f.custom[a],l=e.params.getSkinExports(h.styleItem.skin),m=d.verticalMenuCalculations.getVisibleItemsCount(j),n=Math.max(f.minHeight[a],h.layout.height),o=d.verticalMenuCalculations.getItemHeight(n,k.params.separator,m,l),p=d.verticalMenuCalculations.getLineHeight(o,k.params.separator,k.params.border,l);b.forEach(k.linksInfo,function(a){g(a.node,a.hasOverflow,p)}),b.forEach(k.liNodes,function(a){a.style.height=o+"px"})}function i(c,d,e){var g=e[c],h=a(g),i=h.find("a.level0"),j=0,k=0;b.forEach(i,function(a){a.offsetWidth>j&&(j=a.offsetWidth),k+=a.offsetHeight}),d.custom[c]={linksInfo:b.map(h.find("a"),function(a){return{node:a,hasOverflow:a.offsetWidth>j}}),liNodes:h.find("li"),params:f(g)};var l=parseInt(g.getAttribute("data-param-border")||0,10),m=parseInt(g.getAttribute("data-param-padding")||0,10),n=j+2*m+2*l;n>d.width[c]&&(d.width[c]=n),d.minHeight[c]=k}return c.registerCustomMeasure("wysiwyg.common.components.verticalmenu.viewer.VerticalMenu",i),c.registerSAFEPatcher("wysiwyg.common.components.verticalmenu.viewer.VerticalMenu",h),{}}),define("layout/specificComponents/loginButtonLayout",["lodash","layout/util/layout"],function(a,b){"use strict";function c(a,b){var c=a+"container";b.minHeight[a]=b.height[c],b.height[c]>b.height[a]&&(b.height[a]=b.height[c])}function d(a,b,c){var d=a+"container",e=c.height[a],f=c.height[d],g=(e-f)/2;b.css(d,{"margin-top":g+"px"})}b.registerRequestToMeasureChildren("wysiwyg.viewer.components.LoginButton",[["container"]]),b.registerCustomMeasure("wysiwyg.viewer.components.LoginButton",c),b.registerSAFEPatcher("wysiwyg.viewer.components.LoginButton",d)}),define("layout/util/spaceCalculationsRegardingWixAds",[],function(){"use strict";function a(a){var b=parseInt(a,10);return isNaN(b)?0:b}function b(b){return a(b.height.WIX_ADS)+a(b.top.WIX_ADS)}function c(b){return b.height.WIX_ADSdesktopWADTop||b.top.WIX_ADSdesktopWADTop?a(b.height.WIX_ADSdesktopWADTop)+a(b.top.WIX_ADSdesktopWADTop):a(b.height.WIX_ADS)+a(b.top.WIX_ADS)}function d(b){var d,e,c=b.height.screen;return b.height.WIX_ADSdesktopWADTop||b.height.WIX_ADSdesktopWADBottom?(d=a(b.height.WIX_ADSdesktopWADTop)+a(b.top.WIX_ADSdesktopWADTop),e=a(b.height.WIX_ADSdesktopWADBottom),c-d-e):(d=a(b.height.WIX_ADS)+a(b.top.WIX_ADS),c-d)}return{getFirstVisibleTopCoordinate:b,getFirstUnoccupiedTopCoordinate:c,getScreenHeightExcludingAds:d}}),define("layout/specificComponents/dialogLayout",["lodash","layout/util/layout","layout/util/spaceCalculationsRegardingWixAds"],function(a,b,c){"use strict";function d(a,b,d){var e=a+"dialog",f=d.height[e],g=d.height.screen,h=c.getFirstUnoccupiedTopCoordinate(d),i=c.getScreenHeightExcludingAds(d),j=20;b.css(a,{height:g+"px"});var k=(i-f)/2;b.css(e,{top:Math.max(k,j)+h+"px"})}b.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.EnterPasswordDialog",[["dialog"]]),b.registerSAFEPatcher("wysiwyg.viewer.components.dialogs.EnterPasswordDialog",d),b.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.MemberLoginDialog",[["dialog"]]),b.registerSAFEPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.MemberLoginDialog",d),b.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.SignUpDialog",[["dialog"]]),b.registerSAFEPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.SignUpDialog",d),b.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.RequestPasswordResetDialog",[["dialog"]]),b.registerSAFEPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.RequestPasswordResetDialog",d),b.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.ResetPasswordDialog",[["dialog"]]),b.registerSAFEPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.ResetPasswordDialog",d),b.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.NotificationDialog",[["dialog"]]),b.registerSAFEPatcher("wysiwyg.viewer.components.dialogs.NotificationDialog",d),b.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.CreditsDialog",[["dialog"]]),b.registerSAFEPatcher("wysiwyg.viewer.components.dialogs.CreditsDialog",d)}),define("layout/util/optimizedCssImageLayout",["lodash","zepto","utils"],function(a,b,c){"use strict";function f(b,c){return!a.includes(b,c)||Boolean(b)!==Boolean(c)}function g(a,b){return a?c.urlUtils.joinURL(b.getStaticMediaUrl(),a):""}function h(c,d){var e=b(d);c.type=e.data("type"),c.currentCss=e.data("image-css"),c.currentCss&&a.isString(c.currentCss)&&(c.currentCss=JSON.parse(c.currentCss)),c.previousBackgroundImageCssUrl=e.css("backgroundImage")}function i(a,b,c,d){d===e.BG_IMAGE?a.css(b,{backgroundImage:c?'url("'+c+'")':""}):a.attr(b,{src:c})}function j(b,c,e,f,g){var h=e.previousBackgroundImageCssUrl;return g.imageResizeHandlers=g.imageResizeHandlers||{},h&&f?(g.imageResizeHandlers[b]||(g.imageResizeHandlers[b]=a.debounce(i,d,{trailing:!0})),void g.imageResizeHandlers[b](c,b,f,e.type)):void i(c,b,f,e.type)}function k(b,c){return c&&(!b||a.some(c,function(a,c){return a!==b[c]}))}function l(b,c,d,e,h,i){if(k(b.currentCss,e)){d.css(c,e);var l=a.defaults(e,b.currentCss);d.data(c,{"image-css":JSON.stringify(l)})}var m=g(h,i);f(b.previousBackgroundImageCssUrl,m)&&j(c,d,b,m,i)}var d=250,e=c.balataConsts;return{cacheCssImageMeasureData:h,patchCssImage:l}}),define("layout/specificComponents/siteBackgroundLayout",["lodash","layout/util/layout","imageClientApi","layout/util/optimizedCssImageLayout"],function(a,b,c,d){"use strict";function h(a,b,c,e,f){c.top[a]=p(c),c.width[a]=q(c,f),c.height[a]=o(c,f),c.height.currentImage=c.height.masterPage,b.css(a,{top:c.top[a]+"px",height:c.height[a]+"px",width:c.width[a]+"px"});var h=c.custom[a],i=k(h.bgData,f);if(d.patchCssImage(h,g,b,i.css,i.uri,f),h.hasVideo){var l=h.bgData,m=j(l,c,f,h.quality);b.css("siteBackgroundcurrentVideo",m)}}function i(a,b){var c=a.getDataByQuery(b),d=a.isMobileView()?"mobile":"desktop";return c.pageBackgrounds[d].ref}function j(b,c,d,e){var f={position:"relative",minWidth:0,minHeight:0,top:0,left:0},g=b.mediaRef;if("WixVideo"!==a.get(g,"type")||d.isTouchDevice())return f;var h=a.find(g.qualities,{quality:e}),i=l(c.width.screen,c.height.screen,h.width,h.height),j=m(b.fittingType,i,h.width,h.height),k=n(b.alignType,i,j,c.width.screen,c.height.screen);return f={position:"relative",minWidth:j.width,minHeight:j.height,top:k.top,left:k.left}}function k(b,d){var g=b.mediaRef,h={backgroundSize:"",backgroundPosition:"",backgroundRepeat:""},i="";if(g){"WixVideo"===g.type&&(g=g.posterImageRef);var j={id:g.uri,width:g.width,height:g.height},k=d.isMobileView()?f:e,l=Math.min(k,j.width),m=Math.min(k,Math.round(l/(j.width/j.height))),n={width:l,height:m,htmlTag:"bg",alignment:b.alignType},o=a.defaults({quality:85},g.quality||{}),p=c.getData(b.fittingType,j,n,o,d.browser);i=p.uri,h={backgroundSize:p.css.container.backgroundSize,backgroundPosition:p.css.container.backgroundPosition,backgroundRepeat:p.css.container.backgroundRepeat}}return{css:h,uri:i}}function l(a,b,c,d){return{wScale:a/c,hScale:b/d}}function m(a,b,d,e){var f,g,h,i=c.fittingTypes;switch(a){case i.SCALE_TO_FILL:h=Math.max(b.wScale,b.hScale),f=Math.round(d*h),g=Math.round(e*h);break;case i.SCALE_TO_FIT:h=Math.min(b.wScale,b.hScale),f=Math.round(d*h),g=Math.round(e*h)}return{width:f,height:g}}function n(a,b,d,e,f){var g={},h=c.alignTypes;switch(a){case h.CENTER:g.left=b.wScale>=b.hScale?0:Math.floor((e-d.width)/2),g.top=b.wScale<=b.hScale?0:Math.floor((f-d.height)/2);break;case h.LEFT:g.left=0,g.top=b.wScale<=b.hScale?0:Math.floor((f-d.height)/2);break;case h.RIGHT:g.left=Math.floor(e-d.width),g.top=b.wScale<=b.hScale?0:Math.floor((f-d.height)/2);break;case h.TOP:g.left=b.wScale>=b.hScale?0:Math.floor((e-d.width)/2),g.top=0;break;case h.BOTTOM:g.left=b.wScale>=b.hScale?0:Math.floor((e-d.width)/2),g.top=Math.floor(f-d.height);break;case h.TOP_LEFT:g.left=0,g.top=0;break;case h.TOP_RIGHT:g.left=Math.floor(e-d.width),g.top=0;break;case h.BOTTOM_LEFT:g.left=0,g.top=Math.floor(f-d.height);break;case h.BOTTOM_RIGHT:g.left=Math.floor(e-d.width),g.top=Math.floor(f-d.height)}return g}function o(a,b){var c=a.height[b.getStructureCompId()],d=a.height.screen-p(a);return Math.max(d,c)}function p(a){var b=parseInt(a.height.WIX_ADS,10);b=isNaN(b)?0:b;var c=parseInt(a.top.WIX_ADS,10);return c=isNaN(c)?0:c,b+c}function q(a,b){var c=a.width[b.getStructureCompId()];return Math.ceil(Math.max(a.width.screen,c))}function r(a){return[[a.getPrimaryPageId()]]}function s(a,b,c,e){c[g]=document.querySelector(".siteBackgroundcurrentImage"),c.siteBackgroundcurrentVideo=document.querySelector(".siteBackgroundcurrentVideo");var f=e.getPrimaryPageId(),h=i(e,f),j=c.siteBackgroundcurrentVideo;b.custom[a]={bgData:h,hasVideo:Boolean(j),quality:j&&j.getAttribute("data-quality")},d.cacheCssImageMeasureData(b.custom[a],c[g])}var e=1920,f=1e3,g="siteBackgroundcurrentImage";b.registerRequestToMeasureDom("wysiwyg.viewer.components.SiteBackground"),b.registerRequestToMeasureChildren("wysiwyg.viewer.components.SiteBackground",r),b.registerSAFEPatcher("wysiwyg.viewer.components.SiteBackground",h),b.registerCustomMeasure("wysiwyg.viewer.components.SiteBackground",s)}),define("layout/specificComponents/wPhotoLayout",["zepto","lodash","layout/util/layout","layout/specificComponents/imageLayout","utils","imageClientApi"],function(a,b,c,d,e,f){"use strict";function h(a){return a===f.fittingTypes.LEGACY_FIT_WIDTH?f.fittingTypes.LEGACY_FIT_HEIGHT:g[a]||a}function i(a,b,c){var d=b.height[a]-(b.custom[a].marginHeight||0),e=b.width[a]-(b.custom[a].marginWidth||0),g={width:e>0?e:b.width[a],height:d>0?d:b.height[a]},h=b.custom[a].exactHeight-(b.custom[a].marginHeight||0);return c===f.fittingTypes.LEGACY_FIT_HEIGHT&&Math.ceil(h)===g.height&&(g.height=h),g}function j(b,c,d){var e=a(d[b]),f=parseInt(e.data("content-padding-horizontal"),10),g=parseInt(e.data("content-padding-vertical"),10),h=parseFloat(e.data("exact-height"));c.height[b]=c.custom[b]&&c.custom[b].thisIsMyHeight||d[b].offsetHeight,c.custom[b]={marginWidth:f,marginHeight:g,exactHeight:h}}function k(a,c,f,g,j){var k=a+"img",l=a+"link",m=g.dataItem,n=g.propertiesItem,o=n&&n.displayMode||"fill",p=h(o),q=e.imageUtils.getContainerSize(i(a,f,p),{width:m.width,height:m.height},p),r=e.layout.isVerticallyStretched(g.layout),s=e.layout.isHorizontallyStretched(g.layout),t={width:s?"":q.width+f.custom[a].marginWidth,height:r?"":q.height+f.custom[a].marginHeight},u={width:m.width,height:m.height,displayMode:p,uri:m.uri};b.assign(u,b.pick(m,["crop","quality"])),d.patchNodeImage(k,c,f,j,u,q),c.css(a,t),c.css(l,q)}var g={fitWidthStrict:f.fittingTypes.LEGACY_FIT_WIDTH,fitHeightStrict:f.fittingTypes.LEGACY_FIT_HEIGHT},l={pathArray:["img"],type:"core.components.Image"};c.registerRequestToMeasureDom("wysiwyg.viewer.components.WPhoto"),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.WPhoto",[l,["link"]]),c.registerSAFEPatcher("wysiwyg.viewer.components.WPhoto",k),c.registerCustomMeasure("wysiwyg.viewer.components.WPhoto",j),c.registerRequestToMeasureDom("wysiwyg.viewer.components.ClipArt"),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.ClipArt",[l,["link"]]),c.registerSAFEPatcher("wysiwyg.viewer.components.ClipArt",k),c.registerCustomMeasure("wysiwyg.viewer.components.ClipArt",j)}),define("layout/specificComponents/documentMediaLayout",["zepto","lodash","layout/util/layout","imageClientApi","layout/specificComponents/imageLayout"],function(a,b,c,d,e){"use strict";function f(a,c,f,g,h){var i=b.defaults({displayMode:d.fittingTypes.LEGACY_FULL},g.dataItem);e.patchNodeImage(a+"img",c,f,h,i,f.custom[a].containerSize),c.css(a,{width:f.width[a]})}function g(b,c,d){var e=a(d[b]),f=b+"label",g=c.width[f],h=c.height[f],i=Math.max(c.width[b],g),j=e.data("content-padding-left"),k=e.data("content-padding-right"),l=e.data("content-padding-top"),m=e.data("content-image-height"),n={width:i-j-k,height:Math.max(m-l-h,1)};c.custom[b]={containerSize:n},c.width[b]=i,c.minWidth[b]=g}c.registerRequestToMeasureChildren("wysiwyg.viewer.components.documentmedia.DocumentMedia",[["label"],{pathArray:["img"],type:"core.components.Image"},["link"]]),c.registerCustomMeasure("wysiwyg.viewer.components.documentmedia.DocumentMedia",g),c.registerSAFEPatcher("wysiwyg.viewer.components.documentmedia.DocumentMedia",f)}),define("layout/util/calculateScreenWidthDimensions",["utils","layout/util/rootLayoutUtils"],function(a,b){"use strict";var c=a.layout.stretchInCenteredContainer;return function(a,e,f){var g=Math.max(a.width.screen,b.getRootWidth(e,a,f));return c(b.getRootWidth(e,a,f),g)}}),define("layout/specificComponents/bgImageLayout",["zepto","lodash","layout/util/layout","coreUtils","imageClientApi","layout/util/optimizedCssImageLayout","layout/specificComponents/imageLayout"],function(a,b,c,d,e,f,g){"use strict";function i(a){return!a||d.urlUtils.isExternalUrl(a)}function j(a,c,d,f,g,h){var i=g.mobile.getDevicePixelRatio(),j={width:f.width,height:f.height,alignment:c,htmlTag:h||"bg",pixelAspectRatio:i},k={id:d.uri,width:d.width,height:d.height},l=b.defaults({quality:85},d.quality||{});return e.getData(a,k,j,l,g.browser)}function k(a,b,c){var d=a+"bg";c[d]&&(b.custom[a]={},f.cacheCssImageMeasureData(b.custom[a],c[d]))}function l(b,c,d){var e=b+h.IMAGE,i=d[e].getAttribute("data-type");if(c.custom[b]=c.custom[b]||{},c.custom[b].type=i,i===h.IMAGE)g.measureNodeImage(e,c,d);else{var j=e+"image";d[j]=a(d[e]).find("#"+j)[0];var k=d[j];c.custom[e]={},f.cacheCssImageMeasureData(c.custom[e],k)}}function m(a,b,c,d,e){var f=c.width,g=d||c.height,h=p(a);if(h&&!i(h.uri)){var k=a.fittingType,l=a.alignType;return j(k,l,h,{width:f,height:g},e,b)}}function n(a,c,d,e,i,j,k,l){var n=e.custom[a].type,q=o(i);if(n===h.IMAGE){var r={width:l.width,height:k},s=b.assign({displayMode:q.fittingType},p(q));g.patchNodeImage(c,d,e,j,s,r,q.alignType)}else{var t=c+"image",u=m(q,"bg",l,k,j),v=b.assign({height:k},u.css.container);f.patchCssImage(e.custom[c],t,d,v,u.uri,j)}}function o(a){return b.isUndefined(a.designDataItem)?a.dataItem.background:a.designDataItem.background}function p(a){var b=a.mediaRef;return b&&"WixVideo"===b.type&&(b=b.posterImageRef),b}function q(a,b,c,d,e,g){var h=c.custom[a],k=a+"bg";if(h){var l=d.dataItem;if(!l||i(l.uri))return;var m=d.propertiesItem.fittingType,n=d.propertiesItem.alignType,o=j(m,n,l,g,e);f.patchCssImage(h,k,b,o.css.container,o.uri,e)}}var h=d.balataConsts;return c.registerRequestToMeasureChildren("wysiwyg.viewer.components.background.bgImage",[["image"]]),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.BgImageStrip",[["bg"]]),{measureLegacyBgImageStrip:k,measureBgImageBalata:l,patchBgImage:n,patchLegacyBgImageStrip:q}}),define("layout/specificComponents/bgVideoLayout",["zepto","lodash","coreUtils","imageClientApi"],function(a,b,c,d){"use strict";function g(a,c,d,f,g){var k={position:"relative",minWidth:0,minHeight:0,top:0,left:0},l=a.mediaRef;if(!l||"WixVideo"!==l.type||d.isTouchDevice())return k;var m=b.find(l.qualities,{quality:f}),n=h(c.width,c.height,m.width,m.height),o=i(a.fittingType,n,m.width,m.height),p=j(a.alignType,n,o,c);return k={position:"relative",minWidth:o.width,minHeight:o.height,left:p.left,top:e.isFullScreenByEffect(g,d)?"":p.top}}function h(a,b,c,d){return{wScale:a/c,hScale:b/d}}function i(a,b,c,e){var f,g,h,i=d.fittingTypes;switch(a){case i.SCALE_TO_FILL:h=Math.max(b.wScale,b.hScale),f=Math.round(c*h),g=Math.round(e*h);break;case i.SCALE_TO_FIT:h=Math.min(b.wScale,b.hScale),f=Math.round(c*h),g=Math.round(e*h)}return{width:f,height:g}}function j(a,b,c,e){var f=e.width,g=e.compRootHeight,h={},i=d.alignTypes;switch(a){case i.CENTER:h.left=b.wScale>=b.hScale?0:(f-c.width)/2,h.top=b.wScale<=b.hScale?0:(g-c.height)/2;break;case i.LEFT:h.left=0,h.top=b.wScale<=b.hScale?0:(g-c.height)/2;break;case i.RIGHT:h.left=f-c.width,h.top=b.wScale<=b.hScale?0:(g-c.height)/2;break;case i.TOP:h.left=b.wScale>=b.hScale?0:(f-c.width)/2,h.top=0;break;case i.BOTTOM:h.left=b.wScale>=b.hScale?0:(f-c.width)/2,h.top=Math.floor(g-c.height);break;case i.TOP_LEFT:h.left=0,h.top=0;break;case i.TOP_RIGHT:h.left=Math.floor(f-c.width),h.top=0;break;
case i.BOTTOM_LEFT:h.left=0,h.top=Math.floor(g-c.height);break;case i.BOTTOM_RIGHT:h.left=Math.floor(f-c.width),h.top=Math.floor(g-c.height)}return h}function k(a,b,d){var e="";return b?c.urlUtils.joinURL(d.getStaticVideoUrl(),a.videoId,b,"mp4","file.mp4"):e}function l(a){return a.designDataItem&&a.designDataItem.background?a.designDataItem.background:a.dataItem.background}function m(a,b,c,d,h,i,j){var m=a+f.VIDEO,n=l(d),o=e.getBgEffectName(d.behaviorsItem,h),p=j.width,q=j.height,r=c.custom[m],s=r.quality,t=g(n,{width:p,height:i,compRootHeight:q},h,s,o);b.attr(m+"video",{width:t.minWidth}),b.attr(m+"video",{height:t.minHeight}),b.css(m+"video",t);var u=k(n.mediaRef,s,h);r.src!==u&&(b.attr(m+"mp4",{src:u}),r.videoNode.load())}function n(b,c,d){var e=b+f.VIDEO,g=d[e],h=d[e+"video"]=g.firstChild,i=d[e+"mp4"]=h.firstChild;c.custom[e]={quality:a(g).data("quality"),src:i.src,videoNode:h}}var e=c.containerBackgroundUtils,f=c.balataConsts;return{patchBgVideo:m,measureBgVideo:n}}),define("layout/specificComponents/balataLayout",["lodash","coreUtils","layout/specificComponents/bgImageLayout","layout/specificComponents/bgVideoLayout"],function(a,b,c,d){"use strict";function h(b,c,d,e,f){var g=b[e][d];return a.isNumber(g)?g:(g=c[d][f],a.isNumber(g)?g:0)}function i(b,c,d,f,g,i){var k=n(b),l=c.custom[k]={},m=k+e.IMAGE,o=k+e.VIDEO,p=k+e.OVERLAY;l.hasBalata=Boolean(d[k]),l.hasImage=Boolean(d[m]),l.hasVideo=Boolean(d[o]),l.hasOverlay=Boolean(d[p]),l.hasBalata&&(a.forEach(i,function(a,b){c[b][k]=a}),c.left[k]=h(c,d,k,"left","offsetLeft"),c.top[k]=h(c,d,k,"top","offsetTop"),j(k,c,d,g))}function j(a,b,e,f){var g=o(f),h=g.mediaRef,i=b.custom[a];i.hasImage&&h&&c.measureBgImageBalata(a,b,e),i.hasVideo&&h&&"WixVideo"===h.type&&d.measureBgVideo(a,b,e)}function k(b,c,d,g,h,i,j){var k=n(b);if(d.custom[k].hasBalata){var o=k+e.MEDIA,p=f.getBgEffectName(g.behaviorsItem,h),q=f.getHeightByEffect(p,d,i.height),r={overflow:"hidden",left:i.left,width:i.width,clip:"rect(0px,"+i.width+"px,"+i.height+"px,0px)"};j&&(r=a.omit(r,["left","width"])),c.css(k,r),c.css(o,{width:i.width+"px",left:l(p,i,h),height:q+"px"}),m(k,c,d,g,h,q,i)}}function l(a,b,c){return f.isFullScreenByEffect(a,c)?b.absoluteLeft||0:0}function m(a,b,f,g,h,i,j){var k=a+e.IMAGE,l=f.custom[a],m=o(g).mediaRef;l.hasImage&&m&&c.patchBgImage(a,k,b,f,g,h,i,j),l.hasVideo&&m&&"WixVideo"===m.type&&d.patchBgVideo(a,b,f,g,h,i,j)}function n(a){return a+e.BALATA}function o(b){return a.isUndefined(b.designDataItem)?b.dataItem.background:b.designDataItem.background}var e=b.balataConsts,f=b.containerBackgroundUtils,g=[[e.BALATA],[e.BALATA,e.MEDIA],[e.BALATA,e.IMAGE],[e.BALATA,e.VIDEO],[e.BALATA,e.OVERLAY],[e.BALATA,e.OVERLAY,e.OVERLAY]];return{BALATA_PATHS_TO_REQUEST_MEASURE:g,measure:i,patch:k}}),define("layout/specificComponents/containerAndScreenWidthLayout",["lodash","zepto","experiment","layout/util/layout","utils","layout/util/rootLayoutUtils","layout/util/calculateScreenWidthDimensions","layout/specificComponents/bgImageLayout","layout/specificComponents/balataLayout"],function(a,b,c,d,e,f,g,h,i){"use strict";function l(a,b,c){b.height[a]=c[a].offsetHeight,q(a,b,c)}function m(a){return a.isMobileView()?"mobile":"desktop"}function n(b,c){return a.get(b.dataItem,["pageBackgrounds",m(c),"ref"])}function o(d,f,g,h,i){l(d,f,g),f.shrinkableContainer[d]=!0;var j=e.layout.getPageBottomChildEnd(f,g,h,i)+f.containerHeightMargin[d],m=h.getPageMinHeight(),o=a.get(i,["propertiesItem",h.isMobileView()?"mobile":"desktop"]);if(o&&o.minHeight&&(m=o.minHeight),f.pageBottomByComponents[d]=j,f.minHeight[d]=m,f.height[d]=Math.max(m,j),c.isOpen("sv_popups")&&(g.POPUPS_ROOT=b("#POPUPS_ROOT"),i.dataItem.isPopup)){var p={background:n(i,h)},q=a.clone(i);q.id+=k,q.designDataItem=p,f.top[d]=0,r(d,f,g,h,q)}}function p(a,b,c){var d=b.height[a+"inlineContent"]||0;b.containerHeightMargin[a]=d?c[a].offsetHeight-d:0}function q(a,b,c){b.left[a]=0,p(a,b,c)}function r(a,b,c,d,e){q(a,b,c),J(e)&&i.measure(a,b,c,d,e,{left:Math.max(0,.5*(b.clientWidth-b.width.screen)),width:b.width.screen,height:b.innerHeight.screen})}function s(a,b,c,d,e){if(q(a,b,c),J(e)){var f=g(b,d,e.rootId);b.width[a]=f.width;var h={width:f.width,left:f.left,height:b.height[a]};i.measure(a,b,c,d,e,h)}}function t(a,b,c,d,e){b.custom[a]={isFixedPosition:e.layout.fixedPosition},q(a,b,c)}function u(a,b){b.css(a,{left:0})}function v(a,b,c,d,e,f){b.css(f,{width:c.width.screen,left:H(d.layout.width,c.width.screen,e)}),u(a,b)}function w(a,b,c,d,e){var f=a+"screenWidthBackground";v(a,b,c,d,e,f)}function x(a,c,d){q(a,c,d);var e=b(d[a+"navigationArrows"]);c.custom[a]={offset:parseInt(e.attr("data-navigation-button-margin"),10)}}function y(a,c,d,e,f){var g=b(d[a]),h=g.attr("data-parent-id");c.minHeight[a]=c.height[h],c.height[a]=c.height[h],s(a,c,d,e,f)}function z(a,b,c,d,e){var h=a+"inlineContent",i=h+"Parent",j=g(c,d,e.rootId);b.css(i,{left:j.left,width:j.width}),b.css(h,{left:-1*j.left,width:f.getRootWidth(d,c,e.rootId)})}function A(a,b,c,d,e){z(a,b,c,e,d)}function B(a,b,c,d,e){u(a,b,c),z(a,b,c,e,d);var f=H(d.layout.width,c.width.screen,e)+c.custom[a].offset;b.css(a,{width:e.getSiteWidth()}),b.css(a+"prevButton",{left:f}),b.css(a+"nextButton",{right:f})}function C(b,d,e,f,g){if(c.isOpen("sv_popups")&&f.dataItem.isPopup){d.css("POPUPS_ROOT",{width:e.innerWidth.screen,height:e.innerHeight.screen});var h=b+k,j=a.defaultsDeep({id:h,rootId:"masterPage",structure:{behaviors:[]}},f),l=n(f,g);j.designDataItem={background:l},i.patch(b,d,e,j,g,{left:e.left[h],top:e.top[h],width:e.width[h],height:e.height[h]})}}function D(b,c,d,e,h,j){if(J(e)){u(b,c);var k=g(d,h,e.rootId),l=a.assign({top:0,left:k.left,width:k.width,height:d.height[b],absoluteLeft:0},j);c.css(b,{width:f.getRootWidth(h,d,e.rootId)}),i.patch(b,c,d,e,h,l)}}function E(b){return"Image"===a.get(b,["dataItem","type"])}function F(a,b,c,d,e){var f=g(b,d,e.rootId);b.width[a]=f.width,b.left[a]=f.left,E(e)&&h.measureLegacyBgImageStrip(a,b,c,d,e)}function G(a,b,c,d,e){if(b.css(a,{width:c.width[a]+"px",left:c.left[a]+"px"}),E(d)){var f={width:c.width[a],height:c.height[a]};h.patchLegacyBgImageStrip(a,b,c,d,e,f)}else{var g=a+"bg";b.css(g,{backgroundImage:"none"})}}function H(a,b,c){return c.isMobileView()||c.isMobileDevice()?0:Math.min(parseInt(Math.floor((a-b)/2),10),0)}function I(a,b,c,d){var e=d.layout&&d.layout.fixedPosition;b.css(a,{height:c.height[a],bottom:e?c.siteMarginBottom:"auto",top:e?"auto":c.top[a]})}function J(b){return a.isUndefined(b.designDataItem)?b.dataItem.background:b.designDataItem.background}var j=e.balataConsts,k=j.BALATA;return d.registerRequestToMeasureDom("mobile.core.components.Container"),d.registerRequestToMeasureDom("mobile.core.components.Page"),d.registerRequestToMeasureDom("wixapps.integration.components.AppPage"),d.registerRequestToMeasureDom("wysiwyg.viewer.components.FooterContainer"),d.registerRequestToMeasureDom("wysiwyg.viewer.components.HeaderContainer"),d.registerRequestToMeasureDom("wysiwyg.viewer.components.ScreenWidthContainer"),d.registerRequestToMeasureDom("wysiwyg.viewer.components.StripContainerSlideShow"),d.registerRequestToMeasureDom("wysiwyg.viewer.components.StripContainer"),d.registerRequestToMeasureDom("wysiwyg.viewer.components.StripColumnsContainer"),d.registerRequestToMeasureDom("wysiwyg.viewer.components.Column"),d.registerRequestToMeasureDom("wysiwyg.viewer.components.StripContainerSlideShowSlide"),d.registerMeasureChildrenFirst("mobile.core.components.Page",!0),d.registerMeasureChildrenFirst("wixapps.integration.components.AppPage",!0),d.registerRequestToMeasureChildren("mobile.core.components.Container",[["inlineContent"]]),d.registerRequestToMeasureChildren("mobile.core.components.Page",function(a,b,d,e){return c.isOpen("sv_popups")&&e.dataItem.isPopup?[["inlineContent"]].concat(i.BALATA_PATHS_TO_REQUEST_MEASURE):[["inlineContent"]]}),d.registerRequestToMeasureChildren("wixapps.integration.components.AppPage",[["inlineContent"]]),d.registerRequestToMeasureChildren("wysiwyg.viewer.components.FooterContainer",[["screenWidthBackground"],["inlineContent"]]),d.registerRequestToMeasureChildren("wysiwyg.viewer.components.PagesContainer",[["screenWidthBackground"],["inlineContent"]]),d.registerRequestToMeasureChildren("wysiwyg.viewer.components.HeaderContainer",[["screenWidthBackground"],["inlineContent"]]),d.registerRequestToMeasureChildren("wysiwyg.viewer.components.ScreenWidthContainer",[["screenWidthBackground"],["inlineContent"]]),d.registerRequestToMeasureChildren("wysiwyg.viewer.components.StripContainerSlideShow",[["background"],["inlineContentParent"],["inlineContent"],["shownOnAllSlides"],["navigationArrows"],["prevButton"],["nextButton"]]),d.registerRequestToMeasureChildren("wysiwyg.viewer.components.StripContainer",[["inlineContent"]].concat(i.BALATA_PATHS_TO_REQUEST_MEASURE)),d.registerRequestToMeasureChildren("wysiwyg.viewer.components.StripContainerSlideShowSlide",[["inlineContentParent"],["inlineContent"]].concat(i.BALATA_PATHS_TO_REQUEST_MEASURE)),d.registerCustomMeasure("mobile.core.components.Container",p),d.registerCustomMeasure("mobile.core.components.Page",o),d.registerCustomMeasure("wixapps.integration.components.AppPage",o),d.registerCustomMeasure("wysiwyg.viewer.components.FooterContainer",t),d.registerCustomMeasure("wysiwyg.viewer.components.PagesContainer",l),d.registerCustomMeasure("wysiwyg.viewer.components.HeaderContainer",t),d.registerCustomMeasure("wysiwyg.viewer.components.ScreenWidthContainer",q),d.registerCustomMeasure("wysiwyg.viewer.components.StripContainerSlideShow",x),d.registerCustomMeasure("wysiwyg.viewer.components.StripContainer",s),d.registerCustomMeasure("wysiwyg.viewer.components.StripContainerSlideShowSlide",y),d.registerCustomMeasure("wysiwyg.viewer.components.BgImageStrip",F),d.registerSAFEPatchers("wysiwyg.viewer.components.FooterContainer",[w,I]),d.registerSAFEPatcher("wysiwyg.viewer.components.HeaderContainer",w),d.registerSAFEPatcher("mobile.core.components.Page",C),d.registerSAFEPatcher("wysiwyg.viewer.components.PagesContainer",w),d.registerSAFEPatcher("wysiwyg.viewer.components.ScreenWidthContainer",w),d.registerSAFEPatcher("wysiwyg.viewer.components.StripContainerSlideShow",B),d.registerSAFEPatcher("wysiwyg.viewer.components.StripContainer",D),d.registerSAFEPatchers("wysiwyg.viewer.components.StripContainerSlideShowSlide",[A,D]),d.registerSAFEPatcher("wysiwyg.viewer.components.BgImageStrip",G),{measureContainer:p,measureStripContainer:s,patchStripContainer:D}}),define("layout/specificComponents/groupLayout",["lodash","layout/util/layout","utils"],function(a,b,c){"use strict";function d(b,d,f,g,h){var i=c.dataUtils.getChildrenData(h.structure,g.isMobileView()),j=e(i,d);d.left[b]=h.layout.x,i.length>0&&(d.width[b]=j.right-j.left,d.height[b]=j.bottom-j.top,d.top[b]=h.layout.y+j.top,d.left[b]=h.layout.x+j.left,a.forEach(i,function(a){d.top[a.id]=a.layout.y-j.top,d.left[a.id]=a.layout.x-j.left}))}function e(b,d){var e,f,g,h;return e=g=Number.MAX_VALUE,f=h=-Number.MAX_VALUE,a.forEach(b,function(a){var b=a.layout,i=d.left&&d.left[a.id]?d.left[a.id]:b.x,j=d.width&&d.width[a.id]?d.width[a.id]:b.width,k=d.top&&d.top[a.id]?d.top[a.id]:b.y,l=d.height&&d.height[a.id]?d.height[a.id]:b.height,m=c.boundingLayout.getBoundingLayout({x:i,y:k,width:j,height:l,rotationInDegrees:b.rotationInDegrees});e=Math.min(e,m.x),f=Math.max(f,m.x+m.width),g=Math.min(g,m.y),h=Math.max(h,m.y+m.height)}),{left:e,right:f,top:g,bottom:h}}function f(b,d,e,f,g){d.css(b,{width:e.width[b],height:e.height[b],top:e.top[b],left:e.left[b]});var h=c.dataUtils.getChildrenData(f.structure,g.isMobileView());a.forEach(h,function(a){d.css(a.id,{top:e.top[a.id],left:e.left[a.id]})})}b.registerMeasureChildrenFirst("wysiwyg.viewer.components.Group",!0),b.registerRequestToMeasureDom("wysiwyg.viewer.components.Group"),b.registerCustomMeasure("wysiwyg.viewer.components.Group",d),b.registerSAFEPatcher("wysiwyg.viewer.components.Group",f)}),define("layout/wixappsLayout/proxyLayoutRegistrar",[],function(){"use strict";var a={};return{registerCustomMeasure:function(b,c){a[b]=c},getProxiesToMeasure:function(){return a}}}),define("layout/specificComponents/wixappsLayout",["zepto","lodash","utils","layout/wixappsLayout/proxyLayoutRegistrar","layout/util/layout","layout/util/singleCompLayout","experiment"],function(a,b,c,d,e,f,g){"use strict";function l(a){b.has(j,[a,"startTime"])||b.set(j,[a,"startTime"],b.now())}function m(a,c,d){if(b.has(j,a)&&!b.has(j,[a,"endTime"])){b.set(j,[a,"endTime"],b.now());try{var e={component_id:a,component_type:k[c],startTime:j[a].startTime,endTime:j[a].endTime,stage_process:"measure",site_id:d.rendererModel.siteInfo.siteId};h.reportBI(d,i.APP_PART_LOADING_STAGES,e)}catch(f){}}}function o(){var c=b.toArray(arguments),d=c.join(""),e=c.slice(1).join("");return a("#"+d)[0]||a("#"+e)[0]}function p(a,c,d,e,f){return g.isOpen("wixappsPerformanceMeasuring")&&b.get(e,"dataItem")&&!b.get(f,["rendererModel","previewMode"])&&"content"===b.get(d,["custom",a,"dataState"])&&m(e.dataItem.id,e.dataItem.appPartName,f),d.custom[a]&&d.custom[a].appPartShouldRenderAgain}function q(a,b,c,d){f.measureComponentChildren(a,o,d,c,b)}function r(a,b,c,d){var e=a.compId,g=o(e);b[e]=g;var h=a.structureInfo;h.id=e,h.type=a.compType,q(h,d,b,c),f.maps.classBasedCustomMeasures[a.compType]&&f.maps.classBasedCustomMeasures[a.compType](e,c,b,d,a.structureInfo)}function s(a,d,e,f,h){var i=a+n,j=b.get(e,[a,"attributes","data-state","value"]);c.stringUtils.isTrue(e[a].getAttribute("data-dynamic-height"))&&"loading"!==j&&(d.height[a]=d.height[i],d.minHeight[a]=d.height[i]),g.isOpen("wixappsPerformanceMeasuring")&&b.get(h,"dataItem")&&"content"===j&&(b.set(d,["custom",a,"dataState"],j),l(h.dataItem.id))}function t(a,c,e,f,g){var h=a.id,i=h+n,j=c.querySelector("#"+i);e.custom[h]=e.custom[h]||{};var k=!1;b.forEach(d.getProxiesToMeasure(),function(a,c){var d=w(c,j);e.custom[h][c]=e.custom[h][c]||[],b.forEach(d,function(b,d){var i=a(b,g,e);e.custom[h][c][d]=i,i.comp&&r(i.comp,f,e,g),i.needsRelayout&&!e.custom[h][c][d].didRelayout&&(k=!0,e.custom[h][c][d].didRelayout=!0)})});var l={};return l[a.id]=!0,{needsAdditionalInnerLayout:k,changedCompsMap:l}}function u(a,c,e,g,h){var i=a.id;c.custom[i].appPartShouldRenderAgain=b.reduce(d.getProxiesToMeasure(),function(a,d,j){var k=c.custom[i][j],l=b.reduce(k,function(a,b){v(b.domManipulations);var d=!1,i=b.comp;return i&&(d=f.patchComponent(i.structureInfo,e,g,c,h)),a||d},!1);return a||l},!1)}function v(c){b.forEach(c,function(c){var d=a(c.node),e=c.funcName,f=b.isArray(c.params)?c.params:[c.params];b.isFunction(d[e])&&d[e].apply(d,f)})}function w(b,c){return a("[data-proxy-name="+b+"]",c)}var h=c.logger,i={APP_PART_LOADING_STAGES:{adapter:"blog-ugc",category:2,description:"measure time for a stage",eventId:511,packageName:"blog",params:{component_id:"component_id",component_type:"component_type",startTime:"startTime",endTime:"endTime",stage_process:"stage_process",site_id:"site_id"},reportType:"event",src:12,type:40}},j={},k=b.invert(c.blogAppPartNames),n="inlineContent";return e.registerLayoutInnerCompsFirst("wixapps.integration.components.AppPart",t,u),e.registerLayoutInnerCompsFirst("wixapps.integration.components.AppPart2",t,u),e.registerRequestToMeasureChildren("wixapps.integration.components.AppPart",[[n]]),e.registerRequestToMeasureDom("wixapps.integration.components.AppPart"),e.registerCustomMeasure("wixapps.integration.components.AppPart",s),e.registerSAFEPatcher("wixapps.integration.components.AppPart",p),e.registerRequestToMeasureChildren("wixapps.integration.components.AppPart2",[[n]]),e.registerRequestToMeasureDom("wixapps.integration.components.AppPart2"),e.registerCustomMeasure("wixapps.integration.components.AppPart2",s),e.registerSAFEPatcher("wixapps.integration.components.AppPart2",p),{appPartMeasureFunction:s,appPartPatcherFunction:p,inlineContentId:n,preMeasureProxies:t,postPatchProxies:u}}),define("layout/specificComponents/svgShape/svgScalerUtils",[],function(){"use strict";return{trim:function(a){return a.replace(/^\s+|\s+$/g,"")},round:function(a){return Math.round(1e6*a)/1e6}}}),define("layout/specificComponents/svgShape/svgPathParser",["lodash","layout/specificComponents/svgShape/svgScalerUtils"],function(a,b){"use strict";return{getParsedPath:function(c){var d=b.trim(c);if(""===d)return[];var e=d.match(/[a-z][^a-z]*/gi),f=e.map(function(c){for(c=c.replace(/-/g," -").replace(/,/g," ").replace(/(-?\d*[\.\-]\d+)/g,function(a,b){return" "+b});a.includes(c,"  ");)c=c.replace(/ {2}/g," ");return[c.substring(0,1),b.trim(c.substring(1))]});return f.map(function(b){var c,d=[];return a.includes("QSCL",b[0].toUpperCase())&&1===b[1].split(",").length?(c=b[1].split(" "),c.length%2!==0?b:(c.forEach(function(a,b,c){b%2===0&&d.push(a+" "+c[b+1])}),[b[0],d.join(",")])):b})},stringifyParsedPath:function(a){var b="";return a.forEach(function(a){a.forEach(function(a){b+=a})}),b}}}),define("layout/specificComponents/svgShape/svgBasicScaler",["layout/specificComponents/svgShape/svgScalerUtils"],function(a){"use strict";var b=function(b,c){return a.round(parseFloat(b)*c)},c=function(a,c,d){var e=a.split(/[\s,]+/);return b(e[0],c)+" "+b(e[1],d)},d=function(b,d,e){if(""===b)return"";var f=b.split(",").map(function(b){return c(a.trim(b),d,e)});return f.join(",")},e=function(c,d){if(""===c)return"";var e=c.split(/[\s,]+/).map(function(c){return b(a.trim(c),d)});return e.join(",")};return{scaleSingleValue:b,scalePairString:c,scaleMultiplePairStrings:d,scaleMultipleSingleStrings:e}}),define("layout/specificComponents/svgShape/svgPathScaler",["lodash","layout/specificComponents/svgShape/svgPathParser","layout/specificComponents/svgShape/svgBasicScaler","utils"],function(a,b,c,d){"use strict";var e=function(){return""},f=function(a,b,d){return c.scaleSingleValue(a,d/(360*b))},g=function(a,b,e){return 7!==a.length?(d.log.verbose("incorrect arc string, should have exactly 7 parameters. (value was "+a.join(" ")),a.join(" ")):(a[0]=c.scaleSingleValue(a[0],b),a[1]=c.scaleSingleValue(a[1],e),a[2]=f(a[2],b,e),a[5]=c.scaleSingleValue(a[5],b),a[6]=c.scaleSingleValue(a[6],e),a.join(" "))},h=function(b,c,d){var e=b.split(/[\s,]+/),f=a.chunk(e,7),h=[];return a.forEach(f,function(a){h.push(g(a,c,d))}),h.join(" ")},i=function(c,d,e){var f=b.getParsedPath(c.getAttribute("d"));a.forEach(f,function(a){var b=[a[1]],c=a[0].toUpperCase();"V"===c?b.push(e):"H"===c?b.push(d):(b.push(d),b.push(e)),a[1]=j[a[0].toUpperCase()].apply(null,b)}),c.setAttribute("d",b.stringifyParsedPath(f))},j={M:c.scaleMultiplePairStrings,L:c.scaleMultiplePairStrings,H:c.scaleMultipleSingleStrings,V:c.scaleMultipleSingleStrings,Z:e,C:c.scaleMultiplePairStrings,S:c.scaleMultiplePairStrings,Q:c.scaleMultiplePairStrings,T:c.scaleMultiplePairStrings,A:h};return{scale:i}}),define("layout/specificComponents/svgShape/svgPolygonParser",["layout/specificComponents/svgShape/svgScalerUtils"],function(a){"use strict";return{getParsedPoints:function(b){var f,c=a.trim(b),d=c.split(/[\s,]+/),e=[];if(""===c)return[];for(f=0;f<d.length;f+=2)e.push([d[f],d[f+1]]);return e},stringifyPoints:function(b){var c="";return b.forEach(function(a){c+=a.join(",")+" "}),a.trim(c)}}}),define("layout/specificComponents/svgShape/svgPolygonScaler",["lodash","layout/specificComponents/svgShape/svgBasicScaler","layout/specificComponents/svgShape/svgPolygonParser"],function(a,b,c){"use strict";return{scale:function(d,e,f){var g=c.getParsedPoints(d.getAttribute("points"));a.forEach(g,function(a){a[0]=b.scaleSingleValue(a[0],e),a[1]=b.scaleSingleValue(a[1],f)}),d.setAttribute("points",c.stringifyPoints(g))}}}),define("layout/specificComponents/svgShape/svgCircleScaler",["layout/specificComponents/svgShape/svgBasicScaler"],function(a){"use strict";return{scale:function(b,c,d){var e=b.getAttribute("cx"),f=b.getAttribute("cy"),g=b.getAttribute("r"),h=Math.min(c,d);e&&f&&(b.setAttribute("cx",a.scaleSingleValue(e,h)),b.setAttribute("cy",a.scaleSingleValue(f,h)),b.setAttribute("r",a.scaleSingleValue(g,h)))}}}),define("layout/specificComponents/svgShape/svgRectScaler",["layout/specificComponents/svgShape/svgBasicScaler"],function(a){"use strict";var b=function(b,c,d,e){d&&b.setAttribute(c,a.scaleSingleValue(d,e))};return{scale:function(a,c,d){var e=a.getAttribute("width"),f=a.getAttribute("height"),g=a.getAttribute("rx"),h=a.getAttribute("ry"),i=a.getAttribute("x"),j=a.getAttribute("y");b(a,"width",e,c),b(a,"height",f,d),b(a,"rx",g,c),b(a,"ry",h,d),b(a,"x",i,c),b(a,"y",j,d)}}}),define("layout/specificComponents/svgShape/svgEllipseScaler",["layout/specificComponents/svgShape/svgBasicScaler"],function(a){"use strict";return{scale:function(b,c,d){var e=b.getAttribute("cx"),f=b.getAttribute("cy"),g=b.getAttribute("rx"),h=b.getAttribute("ry");e&&g&&(b.setAttribute("cx",a.scaleSingleValue(e,c)),b.setAttribute("rx",a.scaleSingleValue(g,c))),f&&h&&(b.setAttribute("cy",a.scaleSingleValue(f,d)),b.setAttribute("ry",a.scaleSingleValue(h,d)))}}}),define("layout/specificComponents/svgShape/svgPolylineParser",["lodash","layout/specificComponents/svgShape/svgScalerUtils"],function(a,b){"use strict";return{getParsedPoints:function(a){var f,c=b.trim(a),d=c.split(/[\s,]+/),e=[];if(""===c)return[];for(f=0;f<d.length;f+=2)e.push([d[f],d[f+1]]);return e},stringifyPoints:function(a){var c="";return a.forEach(function(a){c+=a.join(",")+" "}),b.trim(c)}}}),define("layout/specificComponents/svgShape/svgPolylineScaler",["lodash","layout/specificComponents/svgShape/svgBasicScaler","layout/specificComponents/svgShape/svgPolylineParser"],function(a,b,c){"use strict";return{scale:function(d,e,f){var g=c.getParsedPoints(d.getAttribute("points"));g=a.map(g,function(c){return a.map(c,function(a,c){return b.scaleSingleValue(a,c?f:e)})}),d.setAttribute("points",c.stringifyPoints(g))}}}),define("layout/specificComponents/svgShape/svgLineScaler",["layout/specificComponents/svgShape/svgBasicScaler"],function(a){"use strict";return{scale:function(b,c,d){var e=b.getAttribute("x1"),f=b.getAttribute("y1"),g=b.getAttribute("x2"),h=b.getAttribute("y2");e&&f&&g&&h&&(b.setAttribute("x1",a.scaleSingleValue(e,c)),b.setAttribute("x2",a.scaleSingleValue(g,c)),b.setAttribute("y1",a.scaleSingleValue(f,d)),b.setAttribute("y2",a.scaleSingleValue(h,d)))}}}),define("layout/specificComponents/svgShape/svgScaler",["lodash","layout/specificComponents/svgShape/svgScalerUtils","layout/specificComponents/svgShape/svgPathScaler","layout/specificComponents/svgShape/svgPolygonScaler","layout/specificComponents/svgShape/svgCircleScaler","layout/specificComponents/svgShape/svgRectScaler","layout/specificComponents/svgShape/svgEllipseScaler","layout/specificComponents/svgShape/svgPolylineScaler","layout/specificComponents/svgShape/svgLineScaler"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=function(b){return a.includes(["path","polygon","rect","circle","ellipse","polyline","line"],b.toLowerCase())},k=function(a,c,d,e){var g,h,k,l,f=c.width/c.height,i=f>e,j=e>f;return a.width?d&&i?(k=c.height*e,g=k/a.width):g=c.width/a.width:g=1,a.height?d&&j?(l=c.width/e,h=l/a.height):h=c.height/a.height:h=1,{scaleX:b.round(g),scaleY:b.round(h)}},l=function(a,b,c){return Math.abs(a.width-b.width)<c&&Math.abs(a.height-b.height)<c},m=function(a,b,c){a.setAttribute("transform","translate("+parseFloat(-1*c.x+.5*b)+","+parseFloat(-1*c.y+.5*b)+")")},n=function(a){var b=a.getAttribute("data-original-aspect-ratio");return b?Number(b):null},o=function(a,b){a.hasAttribute("data-original-aspect-ratio")||(a.setAttribute("data-original-aspect-ratio",b),a.setAttribute("viewBox",""),a.removeAttribute("viewBox"))},p=function(b,p,q,r,s){var t=b.getElementsByTagName("g")[0],u=a.pick(q,["width","height"]),v=u.width/u.height,w=a.pick(q,["x","y"]),x={path:c,polygon:d,rect:f,circle:e,ellipse:g,polyline:h,line:i};if(t){var y=n(b);if(y||(y=q.width/q.height,o(b,y)),!l(p,u,1)||s&&v!==y){var z=k(u,p,s,y);a(t.childNodes).filter(function(a){return j(a.nodeName)}).forEach(function(a){var b=a.nodeName.toLowerCase();x[b].scale(a,z.scaleX,z.scaleY)}).commit(),m(t,r,{x:w.x*z.scaleX,y:w.y*z.scaleY}),b.style.width=Math.ceil(u.width*z.scaleX+r)+"px",b.style.height=Math.ceil(u.height*z.scaleY+r)+"px"}}};return{scale:p}}),define("layout/specificComponents/shapeLayout",["lodash","zepto","experiment","utils","layout/util/layout","layout/specificComponents/svgShape/svgScaler"],function(a,b,c,d,e,f){"use strict";function h(b,c,d){d.shapesBoundaries=d.shapesBoundaries||{};var e;d.shapesBoundaries[c]||(e=a.pick(b.getBBox(),["x","y","width","height"]),a.some(e)&&(d.shapesBoundaries[c]={boxBoundaries:e}))}function i(a,b,c){var d=c.width/c.height;a.shapesOriginalAspectRatio=a.shapesOriginalAspectRatio||{},a.shapesOriginalAspectRatio[b]=a.shapesOriginalAspectRatio[b]||d}function j(a,b,c,e){var h,f=b,i=e?"xMidYMid meet":"none",j=c,m=d.svgFeatureDetection.flags().isVectorEffect;return b?m?h=l(a,b,c,e):(h=l(a,b,c,e),f=k(a,b,c)):h=a,{viewBox:g(h),strokeWidth:f,size:j,preserveAspectRatio:i}}function k(a,b,c){var d=Math.min((c.width-b)/a.width,(c.height-b)/a.height);return b*(1/d)}function l(a,b,c,d){var e,f,g,h;return d?e=f=Math.min((c.width-b)/a.width,(c.height-b)/a.height):(e=(c.width-b)/a.width,f=(c.height-b)/a.height),g=c.width/e,h=c.height/f,{width:g,height:h,x:a.x-(g-a.width)/2,y:a.y-(h-a.height)/2}}function m(a,b,c){var d=Array.prototype.slice.call(a.childNodes),e=d.filter(function(a){return"g"===a.tagName});1!==e.length&&(c.custom[b].shouldGroupSVGChildren=!0,c.custom[b].SVGChildren=d)}function n(a,c,d){var e,f;d.custom[c].shouldGroupSVGChildren&&(e=document.createElementNS("http://www.w3.org/2000/svg","g"),f=d.custom[c].SVGChildren,f.forEach(function(a){b(e).append(a)}),b(a).append(e))}function o(a,b){var c=d.svgFeatureDetection.flags().isVectorEffect;return a>0&&b===!1&&!c}function p(b,c,d,e,f){var g=a.get(f,["styleItem","skin"]),j=d[b]&&d[b].getElementsByTagName("svg")[0];if(g&&j){d[b+"svg"]=j;var k=a.get(f,["propertiesItem","maintainAspectRatio"]),l=parseInt(a.get(f,["styleItem","style","properties","strokewidth"],1),10);if(o(l,k)){c.custom[b]=c.custom[b]||{},m(j,b,c),n(j,b,c);var p=d[b+"svg-g"]=j.getElementsByTagName("g")[0];c.custom[b].boundingBox=p?p.getBBox():{},i(e,g,c.custom[b].boundingBox)}else h(j,g,e)}}function q(c,d,e,g,h){var i=d[c+"svg"],k=g.styleItem;if(i&&k){var p,l=g.propertiesItem,m=l&&l.maintainAspectRatio,n=parseInt(a.get(k,["style","properties","strokewidth"],1),10);if(o(n,m))p={width:e.width[c]-n,height:e.height[c]-n},f.scale(i,p,e.custom[c].boundingBox,n,m);else{var q=a.get(h,["shapesBoundaries",k.skin]);if(!q)return;p={width:e.width[c],height:e.height[c]};var r=j(q.boxBoundaries,n,p,m);b(i).css(a.pick(r,["strokeWidth","size"])),b(i).attr(a.pick(r,["preserveAspectRatio","viewBox"]))}}}var g=a.template("${x} ${y} ${width} ${height}");return e.registerCustomMeasure("wysiwyg.viewer.components.svgshape.SvgShape",p),e.registerPatcher("wysiwyg.viewer.components.svgshape.SvgShape",q),c.isOpen("sv_popups")&&(e.registerCustomMeasure("wysiwyg.viewer.components.PopupCloseIconButton",p),e.registerPatcher("wysiwyg.viewer.components.PopupCloseIconButton",q)),{}}),define("layout/specificComponents/richtextLayout",["layout/util/layout"],function(a){"use strict";function c(a,b){b.css(a,{height:""})}var b="wysiwyg.viewer.components.WRichText";return a.registerSAFEPatcher(b,c),a.registerCustomMeasure(b,function(a,b,c,d,e){var f=c[a];b.minHeight[a]=f.offsetHeight,e.propertiesItem&&e.propertiesItem.packed&&(b.height[a]=f.offsetHeight)}),a.registerRequestToMeasureDom(b),{}}),define("layout/specificComponents/matrixGalleryLayout",["layout/util/layout","zepto","utils","imageClientApi","lodash","galleriesCommon","layout/specificComponents/imageLayout"],function(a,b,c,d,e,f,g){"use strict";function m(a,b,c,d,e){return j.getSizeAfterScaling({itemHeight:b,itemWidth:c,displayerData:a,imageMode:d.imageMode,heightDiff:parseInt(e.data("height-diff"),10)||0,widthDiff:parseInt(e.data("width-diff"),10)||0,bottomGap:parseInt(e.data("bottom-gap"),10)||0})}function n(a,c,f,g,j,k,l){var n=b(k),o=n.data("image-index"),p=e.defaults({displayMode:d.fittingTypes.SCALE_TO_FILL},j[o]),q=m(p,f,c,g,n),r=i.getContainerSize(q.imageWrapperSize,n),s=h.getItemPosition(l,c,f,g.margin,g.numCols);return{id:a+k.id,imageData:p,imageNodeId:a+k.id+"image",imageWrapperId:a+k.id+"imageWrapper",containerSize:r,sizeAfterScaling:q,position:s}}function o(a,c,d,f,g){i.measureFlexibleHeightGallery(a,c,d);var j=b(d[a]),m=d[a+"itemsContainer"],o=b(m).children(),p=g.dataItem.items;c.width[a]=Math.max(l,c.width[a]),c.height[a]=Math.max(k,c.height[a]);var q=parseInt(j.data("height-diff"),10)||0,r=parseInt(j.data("width-diff"),10)||0,s=parseInt(j.data("presented-row"),10)||0,t=g.propertiesItem,u=h.getItemWidth(t.margin,t.numCols,c.width[a],r),v=h.getItemHeight(t.margin,c.height[a],s,q);c.custom[a]={displayers:e.map(o,e.partial(n,a,u,v,g.propertiesItem,p))}}function p(a,b,c,d,f){var h=c.height[a],j=c.width[a],k=c.custom[a];b.css(a+"itemsContainer",{height:h,width:j}),b.css(a,{height:h,width:j}),e.forEach(k.displayers,function(a){var d=a.sizeAfterScaling;b.css(a.id,{height:d.displayerSize.height,width:d.displayerSize.width,left:a.position.left,top:a.position.top}),i.updateImageWrapperSizes(b,a.imageWrapperId,d),g.patchNodeImage(a.imageNodeId,b,c,f,a.imageData,a.containerSize)})}function q(a,c){var d=[["itemsContainer"]],f=b("#"+c+"itemsContainer").children();return e.forEach(f,function(a){var b={pathArray:[a.id,"image"],type:"core.components.Image"},c=[a.id,"imageWrapper"],e=[a.id];d.push(b,c,e)}),d}var h=f.utils.matrixCalculations,i=c.galleriesCommonLayout,j=f.utils.matrixScalingCalculations,k=70,l=45;return a.registerRequestToMeasureDom("wysiwyg.viewer.components.MatrixGallery"),a.registerCustomMeasure("wysiwyg.viewer.components.MatrixGallery",o),a.registerRequestToMeasureChildren("wysiwyg.viewer.components.MatrixGallery",q),a.registerSAFEPatcher("wysiwyg.viewer.components.MatrixGallery",p),{}}),define("layout/specificComponents/slideShowLayout",["layout/util/layout","zepto","utils","imageClientApi","lodash","galleriesCommon","layout/specificComponents/imageLayout"],function(a,b,c,d,e,f,g){"use strict";function j(a,c,d,e,f){var g=b(f);return h.getSizeAfterScaling({itemHeight:c,itemWidth:d,displayerData:a,imageMode:e.imageMode,heightDiff:parseInt(g.data("height-diff"),10)||0,widthDiff:parseInt(g.data("width-diff"),10)||0,bottomGap:parseInt(g.data("bottom-gap"),10)||0})}function k(a,c,f,g,h,k){var l=b(k),m=l.data("image-index"),n=e.defaults({displayMode:d.fittingTypes.SCALE_TO_FILL},h[m]),o=j(n,c,f,g,l),p=i.getContainerSize(o.imageWrapperSize,l);return{id:a+k.id,imageData:n,imageNodeId:a+k.id+"image",imageWrapperId:a+k.id+"imageWrapper",containerSize:p,sizeAfterScaling:o}}function l(a,c,d,f,g){i.measureFlexibleHeightGallery(a,c,d);var h=d[a+"itemsContainer"],j=b(h).children(),l=b(d[a]),m=c.height[a]-parseInt(l.data("height-diff"),10)||0,n=c.width[a]-parseInt(l.data("height-diff"),10)||0,o=g.dataItem.items;c.custom[a]={displayers:e.map(j,e.partial(k,a,m,n,g.propertiesItem,o))}}function m(a,b,c,d,f){var h=d.propertiesItem,j=c.height[a],k=c.width[a],l=f.isMobileDevice()||f.isMobileView(),m=c.custom[a].displayers;if(!e.isEmpty(m)){if("flexibleHeight"===h.imageMode){var n=e.last(m);j=n.sizeAfterScaling.displayerSize.height}b.css(a,{height:j,width:k}),e.forEach(m,function(a){b.css(a.id,{height:j,width:k}),i.updateImageWrapperSizes(b,a.imageWrapperId,a.sizeAfterScaling),g.patchNodeImage(a.imageNodeId,b,c,f,a.imageData,a.containerSize,l)})}}function n(a,c){var d=[["itemsContainer"]],f=b("#"+c+"itemsContainer").children();return e.forEach(f,function(a){var b={pathArray:[a.id,"image"],type:"core.components.Image"},c=[a.id,"imageWrapper"],e=[a.id];d.push(b,c,e)}),d}var h=f.utils.matrixScalingCalculations,i=c.galleriesCommonLayout;return a.registerRequestToMeasureDom("wysiwyg.viewer.components.SlideShowGallery"),a.registerCustomMeasure("wysiwyg.viewer.components.SlideShowGallery",l),a.registerRequestToMeasureChildren("wysiwyg.viewer.components.SlideShowGallery",n),a.registerSAFEPatcher("wysiwyg.viewer.components.SlideShowGallery",m),
{}}),define("layout/specificComponents/anchorLayout",["layout/util/layout"],function(a){"use strict";function b(a,b){b.css(a,{width:"0px"})}a.registerSAFEPatcher("wysiwyg.common.components.anchor.viewer.Anchor",b)}),define("layout/specificComponents/tinyMenuLayout",["zepto","layout/util/layout","utils","layout/util/rootLayoutUtils","lodash"],function(a,b,c,d,e){"use strict";function m(a,b,c,g,h){var o,p,m=d.getRootWidth(h,c,g.rootId),n=m-2*k,q=g.layout.fixedPosition;if(q?(p="calc(50% + "+(g.layout.x-m/2)+"px)",o=-g.layout.x+k):(p=g.layout.x+"px",o=-c.custom[a].menuContainerLeft),b.css(a,{left:p}),e.get(g,["styleItem","skin"],l)!==l){var s=+e.get(c,["top","WIX_ADS"],0)+e.get(c,["height","WIX_ADS"],0),t=c.height[a+i]-c.top[a+f];return b.css(a+f,{marginTop:s+"px",maxHeight:t+"px"}),void b.css(a+j,{height:c.innerHeight.screen+1+"px"})}var r=a+f;b.css(r,{maxHeight:(q?c.clientHeight:c.height.masterPage)-e.get(c,["custom",a,"menuContainerTop"],0)}),b.css(a+f,{width:n+"px",left:o+"px"})}function n(b,d,e){var j=a("#SITE_ROOT")[0],l=c.domMeasurements.getElementRect(e[b],j);d.custom[b]={menuContainerTop:l.bottom,menuContainerLeft:l.left-k},d.top[b+f]=c.domMeasurements.getBoundingRect(e[b+f]).top,e[b+i]&&(d.height[b+i]=c.domMeasurements.getElementRect(e[b+i]).height),d.height[b]=d.height[b+g];var m=/_open\b/.test(e[b+g].className);if(m){var n=c.domMeasurements.getElementRect(e[b+h],j);d.minHeight.masterPage=Math.max(d.minHeight.masterPage||0,n.bottom)}}var f="menuContainer",g="menuButton",h="menuItems",i="menuBackground",j="fullScreenOverlay",k=20,l="wysiwyg.viewer.skins.mobile.TinyMenuSkin";b.registerRequestToMeasureChildren("wysiwyg.viewer.components.mobile.TinyMenu",[[f],[g],[h],[j],[i]]),b.registerCustomMeasure("wysiwyg.viewer.components.mobile.TinyMenu",n),b.registerSAFEPatcher("wysiwyg.viewer.components.mobile.TinyMenu",m)}),define("layout/specificComponents/imageZoomLayout",["lodash","zepto","layout/util/layout","layout/specificComponents/imageLayout","utils","imageClientApi"],function(a,b,c,d,e,f){"use strict";function h(a){return a.dataItem||a.structure.compData}function i(a,b){return e.nonPageItemZoom.getZoomedImageData()||a.getDataByQuery(b)}function j(a){var b=e.nonPageItemZoom.getZoomedImageData();return a.getExistingRootNavigationInfo(a.getFocusedRootId()).pageItemId||b&&b.id}function k(b,c,e,g,h){var k=j(h),l=!h.isMobileView()&&h.isMobileDevice()||h.isTabletDevice(),m=i(h,k),n=a.defaults({displayMode:f.fittingTypes.LEGACY_FULL},m);n.quality=a.defaults({quality:90},n.quality||{});var o=e.custom[b],p={width:o.imageContainerWidth,height:o.imageContainerHeight};if(d.patchNodeImage(b+k+"image",c,e,h,n,p),e.custom[b].hasPanel){var q=l?o.dialogBoxWidth:p.width;c.css(b+m.id+"panel",{width:q})}}function l(a,b,c,d,e){var f=c.custom[a];b.css(a+"dialogBox",{width:f.imageContainerWidth,minHeight:f.dialogBoxHeight,paddingTop:f.paddingTop}),k(a,b,c,d,e);var g=j(e);if(f.showDescription&&f.descriptionHeight>f.descriptionHeightLimit){var h=a+g+"description";b.css(h,{height:f.descriptionHeightLimit}),b.data(h,{expandable:"true"}),b.css(h,{height:f.descriptionHeightLimit}),b.css(a+g+"ellipsis",{display:""})}}function m(a,c,d,e){var f=j(e),h=i(e,f),k=!e.isMobileView()&&e.isMobileDevice()||e.isTabletDevice(),l=k?g.getNonOptimizedViewDimensions:g.getDesktopViewDimensions,m=b(d[a]),o=b(d[a+"dialogBox"]),p=n(o),q=a+f+"panel";c.custom[a]=l(h,e,c,parseInt(m.data("width-spacer"),10),parseInt(m.data("height-spacer"),10),c.height[q],p),c.custom[a].hasPanel=Boolean(d[q])}function n(a){var b=o(a,"padding-bottom")+o(a,"padding-top"),c=o(a,"padding-right")+o(a,"padding-left");return{horizontal:c,vertical:b}}function o(a,b){return a&&b?parseInt(a.css(b),10)||0:0}function p(a,c){var d=b(c);if("none"!==d.css("display")){var e=parseInt(d.css("line-height"),10);a.showDescription=!0,a.descriptionHeight=d.height(),a.descriptionHeightLimit=Math.floor(3*e)}}function q(a,b,c,d,e){var f=j(d),h=i(d,f),k=g.getMobileViewDimensions(h,d,b),l=c[a+f+"description"];p(k,l),k.isMobileZoom=e,b.custom[a]=k}var g=e.mediaZoomCalculations,r="wysiwyg.components.imageZoom";c.registerCustomMeasure(r,function(a,b,c,d,e){var f=h(e).id,g=d.isMobileView()?q:m;g(a+f,b,c,d)}),c.registerSAFEPatcher(r,function(a,b,c,d,e){var f=h(d).id,g=e.isMobileView()?l:k;g(a+f,b,c,d,e)}),c.registerRequestToMeasureChildren(r,function(a,b,c,d){var e=h(d).id,f=j(a),g={pathArray:[e,f,"image"],type:"core.components.Image"};return a.isMobileView()?[[e],g,[e,"dialogBox"],[e,f,"description"],[e,f,"ellipsis"]]:[[e],g,[e,"dialogBox"],[e,"buttonPrev"],[e,"buttonNext"],[e,f,"panel"]]})}),define("layout/specificComponents/tpaGalleryLayout",["zepto","lodash","layout/util/layout","layout/util/calculateScreenWidthDimensions"],function(a,b,c,d){"use strict";function e(a){return function(b,c,d,e,f){a.forEach(function(a){a(b,c,d,e,f)})}}function f(a,b){b.width[a]=Math.max(10,b.width[a]),b.minHeight[a]=10}function g(a,b,c){b.css(a+"iframe",{width:c.width[a],height:c.height[a]})}function h(a,b,c,e,f){var g=d(c,e,f.rootId);b.css(a,{width:g.width+"px",left:g.left+"px"}),b.attr(a+"iframe",{style:{width:g.width+"px"}}),c.width[a]=g.width,c.left[a]=g.left}function i(a,b){var c=.33;b.height[a]=c*b.width[a]}function j(a,b,c,e,f){var g=f.propertiesItem;if(g.fitToScreenWidth){var h=c[a],i=d(b,e,f.rootId);h.style.width=i.width+"px",h.style.left=i.left+"px",b.width[a]=i.width,b.left[a]=i.left}}function k(a,b,c,d,e){"vertical"===e.propertiesItem.orientation&&l(a,b,c)}function l(c,d,e){d.height[c]=b.first(a(e[c]).find("iframe")).offsetHeight}function m(a,b,c,d,e){h(a,b,c,e,d)}c.registerRequestToMeasureChildren("tpa.viewer.components.StripSlideshow",[["iframe"]]),c.registerRequestToMeasureChildren("tpa.viewer.components.StripShowcase",[["iframe"]]),c.registerRequestToMeasureChildren("tpa.viewer.components.Collage",[["iframe"]]),c.registerRequestToMeasureChildren("tpa.viewer.components.Honeycomb",[["iframe"]]),c.registerRequestToMeasureChildren("tpa.viewer.components.Accordion",[["iframe"]]),c.registerRequestToMeasureChildren("tpa.viewer.components.Masonry",[["iframe"]]),c.registerRequestToMeasureChildren("tpa.viewer.components.Impress",[["iframe"]]),c.registerRequestToMeasureChildren("tpa.viewer.components.Freestyle",[["iframe"]]),c.registerRequestToMeasureChildren("tpa.viewer.components.Thumbnails",[["iframe"]]),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.tpapps.TPA3DGallery",[["iframe"]]),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.tpapps.TPA3DCarousel",[["iframe"]]),c.registerSAFEPatcher("tpa.viewer.components.StripShowcase",m),c.registerSAFEPatcher("tpa.viewer.components.StripSlideshow",m),c.registerSAFEPatcher("tpa.viewer.components.Collage",g),c.registerSAFEPatcher("tpa.viewer.components.Accordion",g),c.registerSAFEPatcher("tpa.viewer.components.Impress",g),c.registerSAFEPatcher("tpa.viewer.components.Freestyle",g),c.registerSAFEPatcher("tpa.viewer.components.Thumbnails",g),c.registerSAFEPatcher("tpa.viewer.components.Honeycomb",g),c.registerSAFEPatcher("tpa.viewer.components.Masonry",g),c.registerSAFEPatcher("wysiwyg.viewer.components.tpapps.TPA3DGallery",g),c.registerSAFEPatcher("wysiwyg.viewer.components.tpapps.TPA3DCarousel",g),c.registerCustomMeasure("tpa.viewer.components.Collage",e([l,j,f])),c.registerCustomMeasure("tpa.viewer.components.Masonry",e([l,f])),c.registerCustomMeasure("tpa.viewer.components.Honeycomb",f),c.registerCustomMeasure("tpa.viewer.components.Accordion",f),c.registerCustomMeasure("tpa.viewer.components.Impress",f),c.registerCustomMeasure("tpa.viewer.components.Freestyle",e([k,f])),c.registerCustomMeasure("tpa.viewer.components.StripShowcase",f),c.registerCustomMeasure("tpa.viewer.components.StripSlideshow",f),c.registerCustomMeasure("tpa.viewer.components.Thumbnails",f),c.registerCustomMeasure("wysiwyg.viewer.components.tpapps.TPA3DGallery",f),c.registerCustomMeasure("wysiwyg.viewer.components.tpapps.TPA3DCarousel",e([f,i]))}),define("layout/specificComponents/youTubeSubscribeButtonLayout",["layout/util/layout"],function(a){"use strict";function c(a,c,d,e,f){var g=f.propertiesItem.layout,h=b[g+(e.browser.ie?"IE":"")];c.width[a]=h.width,c.height[a]=h.height}var b={"default":{width:145,height:33},defaultIE:{width:145,height:33},full:{width:212,height:55},fullIE:{width:212,height:67}};return a.registerRequestToMeasureDom("wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton"),a.registerCustomMeasure("wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton",c),{}}),define("layout/specificComponents/wFacebookCommentLayout",["layout/util/layout","zepto"],function(a,b){"use strict";function c(a,c,d){var e=b(d[a]).find("iframe")[0];e&&(c.height[a]=Math.max(c.height[a],e.offsetHeight))}a.registerCustomMeasure("wysiwyg.viewer.components.WFacebookComment",c)}),define("layout/specificComponents/facebookLikeLayout",["layout/util/layout"],function(a){"use strict";function d(a){var d=a?a.layout:b.layout;d=a&&a.show_faces?d+"_showFaces":d;var e=a?a.action:b.action;return c[d][e]}function e(a,b,c,e,f){var g=d(f.propertiesItem);b.width[a]=g.w,b.height[a]=g.h}function f(a,b,c){var d=c.width[a],e=c.height[a];b.css(a+"iframe",{width:d,height:e})}var b={layout:"box_count",show_faces:"box_count",action:"like"},c={standard:{like:{w:250,h:40},recommend:{w:290,h:40}},standard_showFaces:{like:{w:250,h:85},recommend:{w:290,h:85}},button_count:{like:{w:170,h:20},recommend:{w:137,h:20}},box_count:{like:{w:106,h:65},recommend:{w:125,h:65}},box_count_showFaces:{like:{w:85,h:65},recommend:{w:125,h:65}},button_count_showFaces:{like:{w:137,h:20},recommend:{w:137,h:20}}};return a.registerRequestToMeasureChildren("wysiwyg.viewer.components.WFacebookLike",[["iframe"]]),a.registerCustomMeasure("wysiwyg.viewer.components.WFacebookLike",e),a.registerSAFEPatcher("wysiwyg.viewer.components.WFacebookLike",f),{}}),define("layout/specificComponents/formMixinLayout",["layout/util/layout"],function(a){"use strict";function b(a,b){var c=b.height[a+"wrapper"];c&&(b.height[a]=c)}function c(a,c,d){b(a,c,d);var e=180;c.width[a]=Math.max(c.width[a],e),c.minWidth[a]=e,c.minHeight[a]=180}function d(a,b){var c=b.height[a+"wrapper"];c&&(b.height[a]=c)}a.registerCustomMeasure("wysiwyg.viewer.components.ContactForm",c),a.registerRequestToMeasureChildren("wysiwyg.viewer.components.ContactForm",[["wrapper"]]),a.registerRequestToMeasureDom("wysiwyg.common.components.subscribeform.viewer.SubscribeForm"),a.registerRequestToMeasureChildren("wysiwyg.common.components.subscribeform.viewer.SubscribeForm",[["wrapper"]]),a.registerCustomMeasure("wysiwyg.common.components.subscribeform.viewer.SubscribeForm",d)}),define("layout/specificComponents/backOfficeTextLayout",["layout/util/layout"],function(a){"use strict";function b(a,b,c){var d=c[a].childNodes[0];d&&(b.height[a]=Math.max(b.height[a],d.offsetHeight))}a.registerCustomMeasure("wysiwyg.common.components.backofficetext.viewer.BackOfficeText",b)}),define("layout/specificComponents/vkShareLayout",["layout/util/layout"],function(a){"use strict";function b(a,b,c){var d=c[a];d&&(b.height[a]=d.offsetHeight,b.width[a]=d.offsetWidth)}a.registerCustomMeasure("wysiwyg.viewer.components.VKShareButton",b),a.registerRequestToMeasureDom("wysiwyg.viewer.components.VKShareButton")}),define("layout/specificComponents/adminLoginLayout",["zepto","layout/util/layout"],function(a,b){"use strict";function d(b,d,e){var f=b+"label",g=a(e[f]);d.width[b]=Math.max(g.offset().width,d.width[b]),d.height[b]=Math.max(c,d.height[b]),d.minWidth[b]=g.offset().width}var c=17;b.registerCustomMeasure("wysiwyg.viewer.components.AdminLoginButton",d),b.registerRequestToMeasureChildren("wysiwyg.viewer.components.AdminLoginButton",[["label"]])}),define("layout/specificComponents/homePageLoginLayout",["zepto","layout/util/layout"],function(a,b){"use strict";function c(b,c,d){var e=a(d[b+"memberTitle"]),f=a(d[b+"actionTitle"]);c.width[b]=Math.max(e.offset().width,f.offset().width,c.width[b]),c.height[b]=Math.max(e.offset().height+f.offset().height,c.height[b])}b.registerCustomMeasure("wysiwyg.viewer.components.wixhomepage.HomePageLogin",c),b.registerRequestToMeasureChildren("wysiwyg.viewer.components.wixhomepage.HomePageLogin",[["memberTitle"],["actionTitle"]])}),define("layout/specificComponents/iTunesButtonLayout",["layout/util/layout"],function(a){"use strict";function b(a,b){b.minWidth[a]=110,b.width[a]=Math.min(400,b.width[a]),b.height[a]=40*b.width[a]/110}a.registerCustomMeasure("wysiwyg.viewer.components.ItunesButton",b)}),define("layout/specificComponents/paypalLayout",["layout/util/layout"],function(a){"use strict";return a.registerCustomMeasure("wysiwyg.viewer.components.PayPalButton",function(a,b,c){b.height[a]=c[a+"submitImage"].offsetHeight,b.width[a]=c[a+"submitImage"].offsetWidth}),a.registerRequestToMeasureChildren("wysiwyg.viewer.components.PayPalButton",[["submitImage"]]),{}}),define("layout/specificComponents/wixSiteLayout",["zepto","layout/util/layout"],function(a,b){"use strict";function d(){var b=a("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),c=a("<div>").css({width:"100%"}).appendTo(b).width();return b.remove(),100-c}function e(a){return"WixSite"===a.rendererModel.siteInfo.documentType}function f(a){return a.isTabletDevice()&&e(a)}function g(a,b){a.css("body",{width:b.width.body})}function h(a,b){c=c||d();var e=document.body.clientWidth,f=window.innerWidth,g=e;f>e+c&&(g=f),a.body=document.body,b.width.body=g}function i(a,b,c,d,e){f(e)&&g(b,c)}function j(a,b,c,d){f(d)&&h(c,b)}var c;b.registerCustomMeasure("document",j),b.registerSAFEPatcher("document",i)}),define("layout/specificComponents/buttonLayout",["zepto","lodash","layout/util/layout","experiment"],function(a,b,c,d){"use strict";function e(a){var b=window.getComputedStyle(a);return parseInt(b.paddingTop,10)+parseInt(b.paddingBottom,10)}function f(a){var b=window.getComputedStyle(a);return parseInt(b.marginRight,10)+parseInt(b.marginLeft,10)}function g(b,c,d){function o(){return i!==""+h.data("prevText")}function p(){return c.minWidth[b]<h.data("prevMinWidth")}function q(){return h.data("prevWidth")===h.data("prevMinWidth")}var g=b+"label",h=a(d[b]),i=h.text(),j=h.data("should-use-flex"),k=window.getComputedStyle(d[b]).minHeight;k&&parseInt(k,10)||(k=c.height[g]),c.minHeight[b]=parseInt(k,10),j?c.minWidth[b]=c.width[g]:c.minWidth[b]=c.width[g]+f(d[g]);var l=h.data("shouldPreventWidthMeasurement");l||(c.width[b]=o()&&p()&&q()&&c.width[g]>0?c.minWidth[b]:Math.max(c.width[b],c.minWidth[b])),c.height[b]=Math.max(c.height[b],c.minHeight[b]),c.custom[b]={align:h.attr("data-align"),margin:parseInt(h.attr("data-margin"),10),shouldPreventWidthMeasurement:l,shouldUseFlex:j,text:i},c.custom[g]={verticalPadding:e(d[g])};var m=c.width[g]+c.custom[b].margin>c.width[b],n=c.custom[b].align;"center"!==n&&(j?c.custom[g].margin=m?c.width[b]-c.width[g]:c.custom[b].margin:c.custom[g]["margin-"+n]=m?c.width[b]-c.width[g]:c.custom[b].margin)}function h(a,c,d){var e;if(d.custom[a].shouldUseFlex){e={};var f=d.custom[a].align;return"center"!==f&&d.custom[c].margin&&(e["margin-"+f]=d.custom[c].margin),e}return e={"line-height":d.height[a]-d.custom[c].verticalPadding+"px"},b.reduce(["margin-left","margin-right"],function(a,e){return b.isUndefined(d.custom[c][e])||(a[e]=d.custom[c][e]),a},e)}function i(a,b,c){var d={height:c.height[a],"min-height":c.minHeight[a]};c.custom[a].shouldPreventWidthMeasurement||(d.width=c.width[a]),b.css(a,d);var e=a+"label",f=h(a,e,c);b.css(e,f),b.data(a,{prevText:c.custom[a].text,prevMinWidth:c.minWidth[a],prevWidth:c.width[a]})}c.registerRequestToMeasureChildren("wysiwyg.viewer.components.SiteButton",[["label"]]),c.registerCustomMeasure("wysiwyg.viewer.components.SiteButton",g),c.registerSAFEPatcher("wysiwyg.viewer.components.SiteButton",i),d.isOpen("sv_popups")&&(c.registerRequestToMeasureChildren("wysiwyg.viewer.components.PopupCloseTextButton",[["label"]]),c.registerCustomMeasure("wysiwyg.viewer.components.PopupCloseTextButton",g),c.registerSAFEPatcher("wysiwyg.viewer.components.PopupCloseTextButton",i))}),define("layout/wixappsLayout/proxyLayout/util/masonryCalculations",["lodash"],function(a){"use strict";var b={getColumnSidePadding:function(a,b,c,d){var e="rtl"===d,f=Math.floor(c/b),g=a*f,h=(b-1-a)*f;return{right:e?g:h,left:e?h:g}},getMasonryRowsAndColumns:function(b,c){for(var d=[],e=[],f=[],g=0;c>g;g++)e.push(0),f.push(0);for(var h=0;h<b.length;h++){var i=a.indexOf(e,a.min(e));d.push({col:i,row:f[i],topOffset:e[i]}),e[i]+=b[h],f[i]++}return d}};return b}),define("layout/wixappsLayout/proxyLayout/paginatedColumnGalleryProxyLayout",["zepto","lodash","layout/wixappsLayout/proxyLayoutRegistrar","layout/wixappsLayout/proxyLayout/util/masonryCalculations"],function(a,b,c,d){"use strict";function e(b){var c=parseInt(a(b).attr("data-columns"),10),d=a(b).attr("data-direction"),e=parseInt(a(b).attr("data-horizontal-gap"),10),f=parseInt(a(b).attr("data-vertical-gap"),10);return{columns:c,direction:d,horizontalGap:e,verticalGap:f}}function f(a){return b.map(a.childNodes,"clientHeight")}function g(a){var c=f(a),g=e(a),h=a.childNodes,i=d.getMasonryRowsAndColumns(c,g.columns),j=Math.floor(a.clientWidth/g.columns),k={domManipulations:[],needsRelayout:!0},l=k.domManipulations,m=[];b.forEach(h,function(a,b){var c=i[b],e=c.row*g.verticalGap+c.topOffset,f=d.getColumnSidePadding(c.col,g.columns,g.horizontalGap,g.direction),h=c.col*j;m.push(e);var k={position:"absolute",top:e+"px","padding-right":f.right+"px","padding-left":f.left+"px"};"rtl"===g.direction?k.right=h+"px":k.left=h+"px",l[b]={node:a,funcName:"css",params:k}});var n=b(h).map(function(a,b){return m[b]+c[b]}).max();return l.push({node:a,funcName:"css",params:{height:n+"px"}}),k}c.registerCustomMeasure("PaginatedColumnGalleryProxy",g)}),define("layout/wixappsLayout/proxyLayout/galleryProxyLayout",["zepto","lodash","layout/wixappsLayout/proxyLayoutRegistrar"],function(a,b,c){"use strict";function d(c,d,e){var f=c.id+"itemsContainer",g=a("#"+f),h=a(c),i=Number(h.attr("data-total-columns")),j=Number(h.attr("data-total-rows")),k=Number(h.attr("data-gap")),l=[],m=g.children();if(m.length){var n=m[0],o=n.offsetWidth,p=n.offsetHeight;l=b.map(m,function(b){var c=parseInt(a(b).attr("data-index"),10),d=Math.floor(c/i)%j,e=d*k,f=c%i,g=f*k;return{node:b,funcName:"css",params:{top:d*p+e,left:f*o+g}}})}return e.height[f]=c.offsetHeight,e.width[f]=c.offsetWidth,e.height[c.id]=c.offsetHeight,e.width[c.id]=c.offsetWidth,{domManipulations:l}}c.registerCustomMeasure("GalleryProxy",d)}),define("layout/wixappsLayout/proxyLayout/imageProxyLayout",["zepto","lodash","layout/wixappsLayout/proxyLayoutRegistrar"],function(a,b,c){"use strict";function d(b,c,d){var e=a(b),f=b.firstChild,g=f.id,h={width:parseInt(e.attr("data-width"),10),height:parseInt(e.attr("data-height"),10),uri:e.attr("data-uri"),quality:c.getGlobalImageQuality()},i={displayMode:e.attr("data-display-mode")};return d.width[g]=b.offsetWidth,d.height[g]=b.offsetHeight,d.custom[g]={thisIsMyHeight:d.height[g]},{comp:{compType:"wysiwyg.viewer.components.WPhoto",compId:g,structureInfo:{dataItem:h,propertiesItem:i,layout:null,styleItem:null}},domManipulations:[]}}c.registerCustomMeasure("Image",d)}),define("layout/wixappsLayout/proxyLayout/buttonProxyLayout",["layout/wixappsLayout/proxyLayoutRegistrar"],function(a){"use strict";function b(a,b,c){var d=a.id;return c.width[d]=a.offsetWidth,c.height[d]=a.offsetHeight,{comp:{compType:"wysiwyg.viewer.components.SiteButton",compId:d,structureInfo:{dataItem:null,propertiesItem:null,layout:null,styleItem:null}},domManipulations:[]}}a.registerCustomMeasure("Button",b),a.registerCustomMeasure("Button2",b)}),define("layout/wixappsLayout/proxyLayout/mediaLabelProxyLayout",["layout/wixappsLayout/proxyLayoutRegistrar"],function(a){"use strict";a.registerCustomMeasure("MediaLabel",function(a,b,c){var d=a.id;return c.width[d]=a.offsetWidth,c.height[d]=a.offsetHeight,{comp:{compType:"wysiwyg.viewer.components.MediaRichText",compId:d,structureInfo:{dataItem:null,propertiesItem:null,layout:null,styleItem:null}},domManipulations:[]}})}),define("layout/wixappsLayout/proxyLayout/sliderGalleryProxyLayout",["zepto","layout/wixappsLayout/proxyLayoutRegistrar"],function(a,b){"use strict";function c(b,c,d){var e=a(b),f=b.firstChild,g=f.id,h={aspectRatio:e.attr("data-aspect-ratio"),imageMode:e.attr("data-image-mode")};return d.width[g]=b.offsetWidth,d.height[g]=b.offsetHeight,{comp:{compType:"wysiwyg.viewer.components.SliderGallery",compId:g,structureInfo:{dataItem:null,propertiesItem:h,layout:null,styleItem:null}},domManipulations:[]}}b.registerCustomMeasure("SliderGallery",c)}),define("layout/specificComponents/imageButtonLayout",["lodash","layout/util/layout","layout/specificComponents/imageLayout","imageClientApi"],function(a,b,c,d){"use strict";function f(a,b){return{width:b.width[a],height:b.height[a]}}function g(b,e,f,g,h,i,j){var k=h.dataItem[b];if(k){var l=e+b,m=a.defaults({displayMode:d.fittingTypes.LEGACY_FULL},k);c.patchNodeImage(l,f,g,i,m,j)}}function h(b,c,d,h,i){var j=f(b,d);a.forEach(e,function(a){g(a,b,c,d,h,i,j)});var k=b+"link";c.css(k,{width:j.width,height:j.height})}function i(){var b=a.map(e,function(a){return{pathArray:[a],type:"core.components.Image"}});return b.push(["link"]),b}var e=["defaultImage","hoverImage","activeImage"];b.registerRequestToMeasureDom("wysiwyg.common.components.imagebutton.viewer.ImageButton"),b.registerRequestToMeasureChildren("wysiwyg.common.components.imagebutton.viewer.ImageButton",i()),b.registerSAFEPatcher("wysiwyg.common.components.imagebutton.viewer.ImageButton",h)}),define("layout/specificComponents/mediaRichTextLayout",["layout/util/layout","zepto"],function(a,b){"use strict";a.registerRequestToMeasureDom("wysiwyg.viewer.components.MediaRichText"),a.registerCustomMeasure("wysiwyg.viewer.components.MediaRichText",function(a,c,d){var e=b(d[a]);c.custom[a]={prevWidth:e.data("width")}}),a.registerSAFEPatcher("wysiwyg.viewer.components.MediaRichText",function(a,b,c){var d=c.custom[a].prevWidth,e=parseInt(c.width[a],10);return d&&parseInt(d,10)===e?(b.css(a,{height:""}),!1):(b.data(a,{width:e}),!0)})}),define("layout/specificComponents/backToTopButtonLayout",["layout/util/layout"],function(a){"use strict";function b(a,b,c){b.custom[a]={siteStructureBoundingClientRect:c.masterPage.getBoundingClientRect()}}function c(a,b,c){var d=a+"bg";b.css(d,{right:c.custom[a].siteStructureBoundingClientRect.left})}a.registerRequestToMeasureChildren("wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton",[["bg"]]),a.registerCustomMeasure("wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton",b),a.registerSAFEPatcher("wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton",c)}),define("layout/specificComponents/appPartZoomLayout",["lodash","layout/util/layout","layout/specificComponents/wixappsLayout"],function(a,b,c){"use strict";function d(a){return a.appPartName?a.id:a.dataItemRef.id}function e(a,b){var c=b.id,e=d(b);return a+c+e}function f(a,b,c){var d=a+"inlineContent",e=Math.max(c.height[a],c.height.screen);b.css(d,{height:e})}function g(a,b,c,d){var e=Math.max(d.height[b],d.height.screen);c.css(a,{height:e})}function h(b,c){var d=a.has(b,"dataItemRef")?b.dataItemRef.appInnerID:b.appInnerID;return!!c.getClientSpecMapEntry(d)}b.registerRequestToMeasureChildren("wixapps.integration.components.AppPartZoom",function(a,b,e,f){if(!h(f.dataItem,a))return null;var g=d(f.dataItem),i=f.dataItem.id;return[[i,g],[i,g,c.inlineContentId]]}),b.registerCustomMeasure("wixapps.integration.components.AppPartZoom",function(a,b,d,f,g){if(!h(g.dataItem,f))return null;var i=e(a,g.dataItem);c.appPartMeasureFunction(i,b,d,f),b.custom[a]={marginTop:Math.max((b.height.screen-b.height[i])/2,0),height:b.height[i]}}),b.registerSAFEPatcher("wixapps.integration.components.AppPartZoom",function(a,b,d,i,j){if(h(i.dataItem,j)){var k=e(a,i.dataItem);j.isMobileView()?(g(a,k,b,d),f(k,b,d)):c.appPartPatcherFunction(k,b,d,null,j)}}),b.registerLayoutInnerCompsFirst("wixapps.integration.components.AppPartZoom",function(a,b,d,f,g){if(!h(a.dataItem,g))return null;var i=e(a.id,a.dataItem),j={id:i},k=document.getElementById(i),l={};return l[a.id]=!0,{needsAdditionalInnerLayout:c.preMeasureProxies(j,k,d,f,g),changedCompsMap:l}},function(a,b,d,f,g){if(!h(a.dataItem,g))return null;var i=e(a.id,a.dataItem),j={id:i};return c.postPatchProxies(j,b,d,f,g)})}),define("layout/specificComponents/facebookShareLayout",["layout/util/layout"],function(a){"use strict";function b(a,b,c){var d=c[a].children[0];d&&(b.height[a]=Math.max(b.height[a],d.offsetHeight),b.width[a]=Math.max(b.width[a],d.offsetWidth))}a.registerCustomMeasure("wysiwyg.viewer.components.FacebookShare",b),a.registerRequestToMeasureDom("wysiwyg.viewer.components.FacebookShare")}),define("layout/specificComponents/paginatedGridGalleryLayout",["layout/util/layout","zepto","lodash","imageClientApi","galleriesCommon","layout/specificComponents/imageLayout"],function(a,b,c,d,e,f){"use strict";function h(a,b,e,h,i,j,k,l,m){c.forEach(a,function(a,n){var o=g.getItemPosition(n,b,e,h.margin,h.numCols);j.css(l+a.imageItemId,{width:b,height:e,left:o.left,top:o.top});var p=c.assign({},m.dataItem.items[a.imageIndex],{displayMode:d.fittingTypes.SCALE_TO_FILL});f.patchNodeImage(l+a.imageItemId,j,k,i,p,{width:b,height:e})})}function i(a,d){var e=[["itemsContainer"]],f=b("#"+d+"itemsContainer").children();return c.forEach(f,function(a){e.push({pathArray:[a.id],type:"core.components.Image"})}),e}function j(a){return c.map(a,function(a){return{imageItemId:a.id,imageIndex:b(a).data("image-index")}})}function k(a,c,d){var e=c.custom[a]={},f=b(d[a]);e.heightDiff=parseInt(f.data("height-diff"),10),e.widthDiff=parseInt(f.data("width-diff"),10);var g=b(d[a+"itemsContainer"]);e.nextItemsData=j(g.children('div[data-page-desc="next"]')),e.prevItemsData=j(g.children('div[data-page-desc="prev"]')),e.currItemsData=j(g.children('div[data-page-desc="curr"]'))}function l(a,b,c,d,e){var f=c.height[a],i=c.width[a],j=c.custom[a],k=d.propertiesItem;b.css(a+"itemsContainer",{width:i-j.widthDiff,height:f-j.heightDiff});var l=g.getItemWidth(k.margin,k.numCols,i,j.widthDiff),m=g.getAvailableRowsNumber(k.maxRows,k.numCols,d.dataItem.items.length),n=g.getItemHeight(k.margin,f,m,j.heightDiff);h(j.nextItemsData,l,n,k,e,b,c,a,d),h(j.prevItemsData,l,n,k,e,b,c,a,d),h(j.currItemsData,l,n,k,e,b,c,a,d)}var g=e.utils.matrixCalculations;return a.registerSAFEPatcher("wysiwyg.viewer.components.PaginatedGridGallery",l),a.registerRequestToMeasureChildren("wysiwyg.viewer.components.PaginatedGridGallery",i),a.registerCustomMeasure("wysiwyg.viewer.components.PaginatedGridGallery",k),{}}),define("layout/specificComponents/PinterestFollowLayout",["layout/util/layout"],function(a){"use strict";return a.registerCustomMeasure("wysiwyg.viewer.components.PinterestFollow",function(a,b,c){b.height[a]=c[a+"followButtonTag"].offsetHeight,b.width[a]=c[a+"followButtonTag"].offsetWidth}),a.registerRequestToMeasureChildren("wysiwyg.viewer.components.PinterestFollow",[["followButtonTag"]]),{}}),define("layout/specificComponents/videoLayout",["layout/util/layout"],function(a){"use strict";function d(a,d,e,f,g){var h=b[g.dataItem.videoType]||c;d.minWidth[a]=h.WIDTH,d.minHeight[a]=h.HEIGHT,d.width[a]=Math.max(d.width[a],h.WIDTH),d.height[a]=Math.max(d.height[a],h.HEIGHT)}var b={VIMEO:{WIDTH:100,HEIGHT:100},YOUTUBE:{WIDTH:200,HEIGHT:200}},c={WIDTH:10,HEIGHT:10};a.registerCustomMeasure("wysiwyg.viewer.components.Video",d)}),define("layout/specificComponents/soundCloudLayout",["layout/util/layout"],function(a){"use strict";function b(a,b){var c=250,d=50;b.minWidth[a]=c,b.minHeight[a]=d,b.width[a]=Math.max(b.width[a],c),b.height[a]=Math.max(b.height[a],d)}a.registerCustomMeasure("wysiwyg.viewer.components.SoundCloudWidget",b)}),define("layout/specificComponents/verticalLineLayout",["layout/util/layout"],function(a){"use strict";var b=2e3;a.registerCustomMeasure("wysiwyg.viewer.components.VerticalLine",function(a,c){c.height[a]=Math.min(c.height[a],b)})}),define("layout/specificComponents/boxSlideShowLayout",["zepto","coreUtils","layout/util/layout","layout/specificComponents/balataLayout"],function(a,b,c,d){"use strict";function g(a,b){b.height[a]=Math.max(e,b.height[a]),b.minHeight[a]=e}function h(b,c,e,g,h){c.top[b]=0,c.left[b]=0;var i=a(e[b]),j=i.attr("data-parent-id");if(c.minHeight[b]=c.height[j],h.designDataItem.background){var k=b+f.BALATA;c.width[k]=c.width[b],c.height[k]=c.height[b],c.left[k]=c.left[b];var l=e[b].getBoundingClientRect();c.custom[b]={absoluteLeft:l.left},d.measure(b,c,e,g,h)}}function i(a,b,c,e,f){if(e.designDataItem.background){var g={top:c.top[a],left:c.left[a],width:c.width[a],height:c.height[a],absoluteLeft:c.custom[a].absoluteLeft};d.patch(a,b,c,e,f,g)}}var e=50,f=b.balataConsts;c.registerCustomMeasure("wysiwyg.viewer.components.BoxSlideShow",g),c.registerCustomMeasure("wysiwyg.viewer.components.BoxSlideShowSlide",h),c.registerRequestToMeasureDom("wysiwyg.viewer.components.BoxSlideShow"),c.registerRequestToMeasureDom("wysiwyg.viewer.components.BoxSlideShowSlide"),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.BoxSlideShowSlide",[["inlineContentParent"],["inlineContent"]].concat(d.BALATA_PATHS_TO_REQUEST_MEASURE)),c.registerSAFEPatcher("wysiwyg.viewer.components.BoxSlideShowSlide",i)}),define("layout/specificComponents/mediaContainerLayout",["lodash","zepto","layout/util/layout","layout/specificComponents/balataLayout","experiment"],function(a,b,c,d,e){"use strict";function h(c,f,h,i,j){if(j.designDataItem.background){d.measure(c,f,h,i,j);var k=h[c].getBoundingClientRect();if(f.absoluteLeft[c]=k.left,e.isOpen("sv_cssDesignData")){var l=c+g;h[l]=h[l]||b(h[c]).find("#"+l)[0];var m=window.getComputedStyle(h[l]),n=parseInt(m.getPropertyValue("border-left-width"),10);a.isUndefined(f.borderWidth)&&(f.borderWidth={}),f.borderWidth[c]=n,f.width[c]=f.innerWidth[c]}}}function i(a,b,c,f,h){if(f.designDataItem.background){e.isOpen("sv_cssDesignData")&&b.css(a+g,{left:-c.borderWidth[a],top:-c.borderWidth[a]});var i={top:0,left:0,width:c.width[a],height:c.height[a],absoluteLeft:c.absoluteLeft[a]};d.patch(a,b,c,f,h,i)}}var f=["wysiwyg.viewer.components.HoverBox"],g="container";a.forEach(f,function(a){c.registerCustomMeasure(a,h),c.registerRequestToMeasureChildren(a,d.BALATA_PATHS_TO_REQUEST_MEASURE),c.registerSAFEPatcher(a,i)})}),define("layout/specificComponents/verticalAnchorsMenuLayout",["zepto","lodash","layout/util/layout"],function(a,b,c){"use strict";function d(c,d,e){var f=a(e[c]),g=f.find("[class*=link]"),h=f.find("[class*=label]"),i=f.find("[class*=symbol]"),j=g.length,k=i.width(),l=Math.ceil(g.height()*j),m=0;b.forEach(h,function(b){m=Math.max(m,a(b).width())});var n=m+k;d.width[c]=Math.max(d.width[c],n),d.height[c]=Math.max(d.height[c],l),d.custom[c]={minHeight:l,minWidth:n}}function e(a,b,c){b.css(a,{width:c.width[a],height:c.height[a]})}c.registerCustomMeasure("wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenu",d),c.registerSAFEPatcher("wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenu",e)}),define("layout/specificComponents/columnsLayout",["lodash","coreUtils","layout/util/layout","layout/specificComponents/balataLayout"],function(a,b,c,d){"use strict";function f(b,c,d,e,f,g,h){var i=b.structure,j=i.id;g(i),d.minHeight[j]=0;var k=h(i);return f.isMobileView()&&(d.top[j]=e[j].offsetTop),{needsAdditionalInnerLayout:!1,changedCompsMap:a.mapValues(k,function(){return!0})}}function g(c,f,g,h,i){var j=h.isMobileView(),k=b.dataUtils.getChildrenData(i.structure,j),l=a.map(k,"id");if(j){var m=2*i.propertiesItem.rowMargin+(k.length-1)*i.propertiesItem.columnsMargin;a.forEach(l,function(a,b){m+=f.height[a],f.minHeight[a]=f.height[a];var d=b===l.length-1;d?f.injectedAnchors[a]=[{fromComp:a,distance:i.propertiesItem.rowMargin,topToTop:0,originalValue:0,type:"BOTTOM_PARENT",locked:!0,targetComponent:c}]:f.injectedAnchors[a]=[{fromComp:a,distance:i.propertiesItem.columnsMargin,
locked:!0,originalValue:0,targetComponent:l[b+1],topToTop:0,type:"BOTTOM_TOP"}]}),f.height[c]=m,f.height[c+e.BALATA]=m}else{var n=a(l).map(a.get.bind(a,f.height)).max();a.forEach(l,function(a){f.top[a]=i.propertiesItem.rowMargin,f.minHeight[a]=n,f.injectedAnchors[a]=[{fromComp:a,distance:0,originalValue:0,type:"BOTTOM_PARENT",locked:!0,targetComponent:c}]}),f.height[c]=n+2*i.propertiesItem.rowMargin,f.containerHeightMargin[c]=i.propertiesItem.rowMargin,f.height[c+e.BALATA]=n+2*i.propertiesItem.rowMargin}d.measure(c,f,g,h,i);var o=g[c].getBoundingClientRect(),p=g[c+e.BALATA].offsetLeft;f.custom[c]={absoluteLeft:o.left+p,backgroundLeft:g[c+e.BALATA].offsetLeft,backgroundWidth:g[c+e.BALATA].offsetWidth}}function h(a,b,c,e,f){b.css(a,{height:c.height[a],left:0});var g={top:0,left:c.custom[a].backgroundLeft,width:c.custom[a].backgroundWidth,height:c.height[a],absoluteLeft:c.custom[a].absoluteLeft};d.patch(a,b,c,e,f,g,!0)}function i(a,b,c,f,g){b.height[a+e.BALATA]=b.minHeight[a],d.measure(a,b,c,f,g);var h=c[a].getBoundingClientRect(),i=c[a+e.BALATA].offsetLeft;b.custom[a]={absoluteLeft:h.left+i,backgroundLeft:c[a+e.BALATA].offsetLeft,backgroundWidth:c[a+e.BALATA].offsetWidth}}function j(a,b,c,e,f){b.css(a,{height:c.height[a]});var g={top:0,left:c.custom[a].backgroundLeft,width:c.custom[a].backgroundWidth,height:c.height[a],absoluteLeft:c.custom[a].absoluteLeft};d.patch(a,b,c,e,f,g,!0)}var e=b.balataConsts;c.registerRequestToMeasureChildren("wysiwyg.viewer.components.StripColumnsContainer",d.BALATA_PATHS_TO_REQUEST_MEASURE),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.Column",d.BALATA_PATHS_TO_REQUEST_MEASURE),c.registerLayoutInnerCompsFirst("wysiwyg.viewer.components.Column",f,a.noop),c.registerCustomMeasure("wysiwyg.viewer.components.StripColumnsContainer",g),c.registerSAFEPatcher("wysiwyg.viewer.components.StripColumnsContainer",h),c.registerCustomMeasure("wysiwyg.viewer.components.Column",i),c.registerSAFEPatcher("wysiwyg.viewer.components.Column",j)}),define("layout/util/popupContainerDocking",["layout/specificComponents/containerAndScreenWidthLayout","layout/specificComponents/balataLayout","siteUtils"],function(a,b,c){"use strict";function e(a,b){return{top:0,left:0,width:a,height:b,absoluteLeft:0}}var d={NINE_GRID:"nineGrid",FULL_HEIGHT:"fullHeight",FULL_WIDTH:"fullWidth"};return{measure:function(e,f,g,h,i){var j=i.propertiesItem,k={};return j.alignmentType===d.FULL_WIDTH?void a.measureStripContainer(e,f,g,h,i):(j.alignmentType===d.FULL_HEIGHT&&(f.minHeight[e]=f.innerHeight.screen,f.shrinkableContainer[e]=!0),k.width=f.width[e],f.left[e]=c.compAlignmentUtils.getLeft(j,f.width[e],f.width.screen,h.getSiteWidth()),void b.measure(e,f,g,h,i,k))},patch:function(f,g,h,i,j){var l,k=i.propertiesItem,m=j.getCurrentPopupId(),n=c.compAlignmentUtils.getTop(k,h.height[f],h.innerHeight.screen);h.top[f]=n,l=h.height[m]=n+h.height[f],g.css(m,{height:l}),g.css(f,{left:h.left[f],top:n,width:h.width[f],height:h.height[f]}),k.alignmentType===d.FULL_WIDTH?a.patchStripContainer(f,g,h,i,j,{width:h.width[f]}):b.patch(f,g,h,i,j,e(h.width[f],h.height[f]))}}}),define("layout/specificComponents/popupContainerLayout",["lodash","layout/util/layout","layout/util/popupContainerDocking","layout/specificComponents/containerAndScreenWidthLayout","layout/specificComponents/balataLayout"],function(a,b,c,d,e){"use strict";function f(a,b,e,f,g){d.measureContainer(a,b,e,f,g),c.measure(a,b,e,f,g);var h=g.propertiesItem;b.width["ROOT_"+g.rootId]="fullWidth"===h.alignmentType?f.getSiteWidth():b.width[a],b.left["ROOT_"+g.rootId]=Math.floor(b.left[a]-f.getSiteX())}function g(a,b,d,e,f){c.patch(a,b,d,e,f)}b.registerMeasureChildrenFirst("wysiwyg.viewer.components.PopupContainer",!0),b.registerRequestToMeasureChildren("wysiwyg.viewer.components.PopupContainer",[["inlineContent"]].concat(e.BALATA_PATHS_TO_REQUEST_MEASURE)),b.registerRequestToMeasureDom("wysiwyg.viewer.components.PopupContainer"),b.registerCustomMeasure("wysiwyg.viewer.components.PopupContainer",f),b.registerSAFEPatcher("wysiwyg.viewer.components.PopupContainer",g)}),define("layout/specificComponents/comboBoxInputLayout",["lodash","zepto","layout/util/layout"],function(a,b,c){"use strict";function d(c,d,e){var f=a.first(b(e[c]).find("select"));d.height[c]=f.offsetHeight,d.width[c]=f.offsetWidth}function e(a,b,c){var d=c.height[a],e=c.width[a];b.css(a,{height:d,width:e})}c.registerRequestToMeasureChildren("wysiwyg.viewer.components.inputs.ComboBoxInput",[["select"]]),c.registerCustomMeasure("wysiwyg.viewer.components.inputs.ComboBoxInput",d),c.registerSAFEPatcher("wysiwyg.viewer.components.inputs.ComboBoxInput",e)}),define("layout/specificComponents/textComponentsLayout",["lodash","layout/util/layout"],function(a,b){"use strict";function c(a,b,c){var d=c[a+"textarea"];b.height[a]=d.offsetHeight,b.width[a]=d.offsetWidth}function d(a,b,c){var d=c[a+"input"];b.height[a]=d.offsetHeight,b.width[a]=d.offsetWidth}function e(a,b,c){b.css(a,{height:c.height[a],width:c.width[a]})}b.registerRequestToMeasureChildren("wysiwyg.viewer.components.inputs.TextInput",[["input"]]),b.registerCustomMeasure("wysiwyg.viewer.components.inputs.TextInput",d),b.registerSAFEPatcher("wysiwyg.viewer.components.inputs.TextInput",e),b.registerRequestToMeasureChildren("wysiwyg.viewer.components.inputs.TextAreaInput",[["textarea"]]),b.registerCustomMeasure("wysiwyg.viewer.components.inputs.TextAreaInput",c),b.registerSAFEPatcher("wysiwyg.viewer.components.inputs.TextAreaInput",e)}),define("layout/specificComponents/radioButtonLayout",["lodash","layout/util/layout","zepto"],function(a,b,c){"use strict";function d(a,b,d){var e=d[a].id,f=c("#"+e+"circle-shadow")[0],g=c("#"+e+"text")[0];b.height[a]=Math.max(f.offsetHeight,g.scrollHeight),b.width[a]=f.offsetWidth+g.offsetWidth}function e(a,b,c){b.css(a,{height:c.height[a],width:c.width[a]})}b.registerRequestToMeasureChildren("wysiwyg.viewer.components.inputs.RadioButton",[["circle-shadow"],["text"]]),b.registerCustomMeasure("wysiwyg.viewer.components.inputs.RadioButton",d),b.registerSAFEPatcher("wysiwyg.viewer.components.inputs.RadioButton",e)}),define("layout/specificComponents/gridLayout",["lodash","layout/util/layout"],function(a,b){"use strict";function e(b){return a.get(b,"[0].offsetHeight")||0}function f(b){return b.dataItem.numberOfDisplayedRows||a.get(b.propertiesItem,"pagination.rowsPerPage")||b.dataItem.rows.length}function g(a,b,g,h,i){var j=g[a],k=j.getElementsByClassName("ag-body-container");b.width[a]=j.offsetWidth,b.height[a]=j.offsetHeight;var l=i.propertiesItem,m=l.heightLayout;if(k.length&&m===d.AUTO){var n=j.getElementsByClassName("ag-header"),o=j.getElementsByClassName("ag-paging-panel"),p=Math.min(f(i),c),q=e(n),r=e(o),s=l.rowHeight;b.height[a]=q+p*s+r}}var c=200,d={MANUAL:"manual",AUTO:"auto"};b.registerCustomMeasure("wysiwyg.viewer.components.Grid",g)}),define("layout/specificComponents/datePickerLayout",["zepto","layout/util/layout"],function(a,b){"use strict";function c(b,c,d){var e=d[b+"icon"],f=d[b+"input"],g=d[b+"inputWrapper"],h=56,i=e.height.baseVal.value+16,j=parseInt(a(f).css("line-height"),10)||0,k=parseInt(a(g).css("border-width"),10)||0,l=2*k;c.height[b]=Math.max(g.offsetHeight,i),c.width[b]=Math.max(g.offsetWidth,h),c.minHeight[b]=Math.max(j,i)+l,c.minWidth[b]=h+l}function d(a,b,c){b.css(a,{height:c.height[a],width:c.width[a]})}b.registerRequestToMeasureChildren("wysiwyg.viewer.components.inputs.DatePicker",[["icon"],["inputWrapper"],["input"]]),b.registerCustomMeasure("wysiwyg.viewer.components.inputs.DatePicker",c),b.registerSAFEPatcher("wysiwyg.viewer.components.inputs.DatePicker",d)}),define("layout/specificComponents/radioGroupLayout",["lodash","layout/util/layout"],function(a,b){"use strict";function c(a,b,c){b.height[a]=c[a+"items"].offsetHeight}function d(a,b,c){b.css(a,{height:c.height[a]})}function e(b,c,d,e){return a.map(e.dataItem.options,function(a,b){return{type:"wysiwyg.viewer.components.inputs.RadioButton",pathArray:["radio"+b]}}).concat([["items"]])}b.registerRequestToMeasureChildren("wysiwyg.viewer.components.inputs.RadioGroup",e),b.registerCustomMeasure("wysiwyg.viewer.components.inputs.RadioGroup",c),b.registerSAFEPatcher("wysiwyg.viewer.components.inputs.RadioGroup",d)}),define("layout",["layout/util/layout","layout/specificComponents/wixHomepageMenuLayout","layout/specificComponents/fiveGridLineLayout","layout/specificComponents/domainSearchLayout","layout/specificComponents/registerToMeasureOnly","layout/specificComponents/registerToPureDomMeasure","layout/specificComponents/areaTooltipLayout","layout/specificComponents/menuLayout","layout/specificComponents/sliderGalleryLayout","layout/specificComponents/verticalMenuLayout","layout/specificComponents/loginButtonLayout","layout/specificComponents/dialogLayout","layout/specificComponents/siteBackgroundLayout","layout/specificComponents/wPhotoLayout","layout/specificComponents/documentMediaLayout","layout/specificComponents/containerAndScreenWidthLayout","layout/specificComponents/groupLayout","layout/specificComponents/wixappsLayout","layout/specificComponents/shapeLayout","layout/specificComponents/richtextLayout","layout/specificComponents/matrixGalleryLayout","layout/specificComponents/slideShowLayout","layout/specificComponents/anchorLayout","layout/specificComponents/tinyMenuLayout","layout/specificComponents/imageZoomLayout","layout/specificComponents/tpaGalleryLayout","layout/specificComponents/youTubeSubscribeButtonLayout","layout/specificComponents/wFacebookCommentLayout","layout/specificComponents/facebookLikeLayout","layout/specificComponents/formMixinLayout","layout/specificComponents/backOfficeTextLayout","layout/specificComponents/vkShareLayout","layout/specificComponents/adminLoginLayout","layout/specificComponents/homePageLoginLayout","layout/specificComponents/iTunesButtonLayout","layout/specificComponents/paypalLayout","layout/specificComponents/bgImageLayout","layout/specificComponents/wixSiteLayout","layout/specificComponents/buttonLayout","layout/wixappsLayout/proxyLayoutRegistrar","layout/wixappsLayout/proxyLayout/paginatedColumnGalleryProxyLayout","layout/wixappsLayout/proxyLayout/galleryProxyLayout","layout/wixappsLayout/proxyLayout/imageProxyLayout","layout/wixappsLayout/proxyLayout/buttonProxyLayout","layout/wixappsLayout/proxyLayout/mediaLabelProxyLayout","layout/wixappsLayout/proxyLayout/sliderGalleryProxyLayout","layout/specificComponents/imageButtonLayout","layout/specificComponents/mediaRichTextLayout","layout/specificComponents/backToTopButtonLayout","layout/specificComponents/appPartZoomLayout","layout/specificComponents/facebookShareLayout","layout/specificComponents/paginatedGridGalleryLayout","layout/specificComponents/PinterestFollowLayout","layout/specificComponents/videoLayout","layout/specificComponents/soundCloudLayout","layout/specificComponents/verticalLineLayout","layout/specificComponents/boxSlideShowLayout","layout/specificComponents/mediaContainerLayout","layout/specificComponents/verticalAnchorsMenuLayout","layout/specificComponents/columnsLayout","layout/specificComponents/popupContainerLayout","layout/specificComponents/comboBoxInputLayout","layout/specificComponents/textComponentsLayout","layout/specificComponents/radioButtonLayout","layout/specificComponents/gridLayout","layout/specificComponents/datePickerLayout","layout/specificComponents/radioGroupLayout","layout/specificComponents/gridLayout"],function(a){"use strict";return a});